{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CollectionNameBuilder = void 0;\nvar CollectionNameBuilder = /** @class */function () {\n  function CollectionNameBuilder() {\n    this.cache = {};\n    this.cacheLimit = 256;\n  }\n  CollectionNameBuilder.prototype.build = function (tag) {\n    var result = this.cache[tag];\n    if (!result) {\n      result = this.process(tag);\n      if (this.cacheLimit > 0) {\n        // Simple anti DDOS protection.\n        this.cache[tag] = result;\n        this.cacheLimit--;\n      }\n    }\n    return result;\n  };\n  CollectionNameBuilder.prototype.process = function (tag) {\n    var parts = tag.split(/[^a-zA-Z0-9_]/).filter(function (p) {\n      return !!p;\n    }).map(function (p) {\n      return p.substring(0, 1).toUpperCase() + p.substring(1).toLowerCase();\n    });\n    if (parts.length < 1) {\n      throw new Error(\"Cannot build table name from value \\\"\".concat(tag, \"\\\"\"));\n    }\n    return parts.join('');\n  };\n  return CollectionNameBuilder;\n}();\nexports.CollectionNameBuilder = CollectionNameBuilder;","map":{"version":3,"sources":["../../../src/mapping/common/CollectionNameBuilder.ts"],"names":[],"mappings":";;;;;;AAAA,IAAA,qBAAA,GAAA,aAAA,YAAA;EAAA,SAAA,qBAAA,GAAA;IACmB,IAAA,CAAA,KAAK,GAA2B,CAAA,CAAE;IAC3C,IAAA,CAAA,UAAU,GAAG,GAAG;EA2B1B;EAzBS,qBAAA,CAAA,SAAA,CAAA,KAAK,GAAZ,UAAa,GAAW,EAAA;IACtB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;IAC5B,IAAI,CAAC,MAAM,EAAE;MACX,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;MAC1B,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;QACvB;QACA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,MAAM;QACxB,IAAI,CAAC,UAAU,EAAE;MAClB;IACF;IACD,OAAO,MAAM;EACf,CAAC;EAEO,qBAAA,CAAA,SAAA,CAAA,OAAO,GAAf,UAAgB,GAAW,EAAA;IACzB,IAAM,KAAK,GAAG,GAAG,CACd,KAAK,CAAC,eAAe,CAAC,CACtB,MAAM,CAAC,UAAC,CAAC,EAAA;MAAK,OAAA,CAAC,CAAC,CAAC;IAAH,CAAG,CAAC,CAClB,GAAG,CAAC,UAAC,CAAC,EAAA;MACL,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;IACvE,CAAC,CAAC;IACJ,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;MACpB,MAAM,IAAI,KAAK,CAAC,uCAAA,CAAA,MAAA,CAAuC,GAAG,EAAA,IAAA,CAAG,CAAC;IAC/D;IACD,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC;EACvB,CAAC;EACH,OAAA,qBAAC;AAAD,CAAC,EAAA;AA7BY,OAAA,CAAA,qBAAA,GAAA,qBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollectionNameBuilder = void 0;\nvar CollectionNameBuilder = /** @class */ (function () {\n    function CollectionNameBuilder() {\n        this.cache = {};\n        this.cacheLimit = 256;\n    }\n    CollectionNameBuilder.prototype.build = function (tag) {\n        var result = this.cache[tag];\n        if (!result) {\n            result = this.process(tag);\n            if (this.cacheLimit > 0) {\n                // Simple anti DDOS protection.\n                this.cache[tag] = result;\n                this.cacheLimit--;\n            }\n        }\n        return result;\n    };\n    CollectionNameBuilder.prototype.process = function (tag) {\n        var parts = tag\n            .split(/[^a-zA-Z0-9_]/)\n            .filter(function (p) { return !!p; })\n            .map(function (p) {\n            return p.substring(0, 1).toUpperCase() + p.substring(1).toLowerCase();\n        });\n        if (parts.length < 1) {\n            throw new Error(\"Cannot build table name from value \\\"\".concat(tag, \"\\\"\"));\n        }\n        return parts.join('');\n    };\n    return CollectionNameBuilder;\n}());\nexports.CollectionNameBuilder = CollectionNameBuilder;\n//# sourceMappingURL=CollectionNameBuilder.js.map"]},"metadata":{},"sourceType":"script"}