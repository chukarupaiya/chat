{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LogsProcessor = void 0;\nvar LogParser_1 = require(\"./LogParser\");\nvar LogDocumentBuilder_1 = require(\"./LogDocumentBuilder\");\nvar LogsProcessor = /** @class */function () {\n  function LogsProcessor(collectionNameBuilder) {\n    this.collectionNameBuilder = collectionNameBuilder;\n  }\n  LogsProcessor.prototype.process = function (batch) {\n    var updates = [];\n    if (batch.abi.length < 1) {\n      return updates;\n    }\n    var logParser = new LogParser_1.LogParser(batch.abi);\n    for (var _i = 0, _a = batch.logs; _i < _a.length; _i++) {\n      var log = _a[_i];\n      var logParams = logParser.read(log);\n      var document = LogDocumentBuilder_1.LogDocumentBuilder.build(log, logParams, batch.block, batch.confirmed, batch.chainId);\n      updates.push({\n        collectionName: this.collectionNameBuilder.build(batch.tag),\n        document: document\n      });\n    }\n    return updates;\n  };\n  return LogsProcessor;\n}();\nexports.LogsProcessor = LogsProcessor;","map":{"version":3,"sources":["../../../src/mapping/logs-processor/LogsProcessor.ts"],"names":[],"mappings":";;;;;;AAGA,IAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;AACA,IAAA,oBAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;AAGA,IAAA,aAAA,GAAA,aAAA,YAAA;EACE,SAAA,aAAA,CAAoC,qBAA4C,EAAA;IAA5C,IAAA,CAAA,qBAAqB,GAArB,qBAAqB;EAA0B;EAE5E,aAAA,CAAA,SAAA,CAAA,OAAO,GAAd,UAAe,KAAe,EAAA;IAC5B,IAAM,OAAO,GAAwB,EAAE;IAEvC,IAAI,KAAK,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE;MACxB,OAAO,OAAO;IACf;IAED,IAAM,SAAS,GAAG,IAAI,WAAA,CAAA,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC;IAE1C,KAAkB,IAAA,EAAA,GAAA,CAAU,EAAV,EAAA,GAAA,KAAK,CAAC,IAAI,EAAV,EAAA,GAAA,EAAA,CAAA,MAAU,EAAV,EAAA,EAAU,EAAE;MAAzB,IAAM,GAAG,GAAA,EAAA,CAAA,EAAA,CAAA;MACZ,IAAM,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC;MACrC,IAAM,QAAQ,GAAG,oBAAA,CAAA,kBAAkB,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,OAAO,CAAC;MAEtG,OAAO,CAAC,IAAI,CAAC;QACX,cAAc,EAAE,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;QAC3D,QAAQ,EAAA;OACT,CAAC;IACH;IAED,OAAO,OAAO;EAChB,CAAC;EACH,OAAA,aAAC;AAAD,CAAC,EAAA;AAxBY,OAAA,CAAA,aAAA,GAAA,aAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogsProcessor = void 0;\nvar LogParser_1 = require(\"./LogParser\");\nvar LogDocumentBuilder_1 = require(\"./LogDocumentBuilder\");\nvar LogsProcessor = /** @class */ (function () {\n    function LogsProcessor(collectionNameBuilder) {\n        this.collectionNameBuilder = collectionNameBuilder;\n    }\n    LogsProcessor.prototype.process = function (batch) {\n        var updates = [];\n        if (batch.abi.length < 1) {\n            return updates;\n        }\n        var logParser = new LogParser_1.LogParser(batch.abi);\n        for (var _i = 0, _a = batch.logs; _i < _a.length; _i++) {\n            var log = _a[_i];\n            var logParams = logParser.read(log);\n            var document = LogDocumentBuilder_1.LogDocumentBuilder.build(log, logParams, batch.block, batch.confirmed, batch.chainId);\n            updates.push({\n                collectionName: this.collectionNameBuilder.build(batch.tag),\n                document: document,\n            });\n        }\n        return updates;\n    };\n    return LogsProcessor;\n}());\nexports.LogsProcessor = LogsProcessor;\n//# sourceMappingURL=LogsProcessor.js.map"]},"metadata":{},"sourceType":"script"}