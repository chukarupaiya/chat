"use strict";(()=>{const e=[({imports:e,liveVar:t,onceVar:r})=>{e([]);const o=globalThis;r.universalThis(o);const{Array:n,Date:s,Float32Array:a,JSON:i,Map:c,Math:l,Number:p,Object:m,Promise:u,Proxy:y,Reflect:f,RegExp:g,Set:d,String:E,WeakMap:b,WeakSet:P}=globalThis;r.Array(n),r.Date(s),r.Float32Array(a),r.JSON(i),r.Map(c),r.Math(l),r.Number(p),r.Object(m),r.Promise(u),r.Proxy(y),r.Reflect(f),r.FERAL_REG_EXP(g),r.Set(d),r.String(E),r.WeakMap(b),r.WeakSet(P);const{Error:w,RangeError:S,ReferenceError:h,SyntaxError:v,TypeError:j}=globalThis;r.FERAL_ERROR(w),r.RangeError(S),r.ReferenceError(h),r.SyntaxError(v),r.TypeError(j);const{assign:k,create:A,defineProperties:T,entries:x,freeze:I,getOwnPropertyDescriptor:O,getOwnPropertyDescriptors:_,getOwnPropertyNames:C,getPrototypeOf:F,is:N,isExtensible:V,keys:R,prototype:M,seal:L,preventExtensions:$,setPrototypeOf:G,values:D}=m;r.assign(k),r.create(A),r.defineProperties(T),r.entries(x),r.freeze(I),r.getOwnPropertyDescriptor(O),r.getOwnPropertyDescriptors(_),r.getOwnPropertyNames(C),r.getPrototypeOf(F),r.is(N),r.isExtensible(V),r.keys(R),r.objectPrototype(M),r.seal(L),r.preventExtensions($),r.setPrototypeOf(G),r.values(D);const{species:U,toStringTag:H,iterator:W,matchAll:B,keyFor:z,for:K}=Symbol;r.speciesSymbol(U),r.toStringTagSymbol(H),r.iteratorSymbol(W),r.matchAllSymbol(B),r.symbolKeyFor(z),r.symbolFor(K);const{isInteger:J}=p;r.isInteger(J);const{stringify:q}=i;r.stringifyJson(q);const Y=m.fromEntries||(e=>{const t={};for(const[r,o]of e)t[r]=o;return t});r.fromEntries(Y);const{defineProperty:X}=m;r.defineProperty(((e,t,r)=>{const o=X(e,t,r);if(o!==e)throw j(`Please report that the original defineProperty silently failed to set ${q(E(t))}. (SES_DEFINE_PROPERTY_FAILED_SILENTLY)`);return o}));const{apply:Z,construct:Q,get:ee,getOwnPropertyDescriptor:te,has:re,isExtensible:oe,ownKeys:ne,preventExtensions:se,set:ae}=f;r.apply(Z),r.construct(Q),r.reflectGet(ee),r.reflectGetOwnPropertyDescriptor(te),r.reflectHas(re),r.reflectIsExtensible(oe),r.ownKeys(ne),r.reflectPreventExtensions(se),r.reflectSet(ae);const{isArray:ie,prototype:ce}=n;r.isArray(ie),r.arrayPrototype(ce);const{prototype:le}=c;r.mapPrototype(le);const{revocable:pe}=y;r.proxyRevocable(pe);const{prototype:me}=RegExp;r.regexpPrototype(me);const{prototype:ue}=d;r.setPrototype(ue);const{prototype:ye}=E;r.stringPrototype(ye);const{prototype:fe}=b;r.weakmapPrototype(fe);const{prototype:ge}=P;r.weaksetPrototype(ge);const{prototype:de}=Function;r.functionPrototype(de);const{prototype:Ee}=u;r.promisePrototype(Ee);const be=F(Uint8Array.prototype);r.typedArrayPrototype(be);const Pe=e=>(t,...r)=>Z(e,t,r);r.uncurryThis(Pe);const we=Pe(M.hasOwnProperty);r.objectHasOwnProperty(we);const Se=Pe(ce.filter);r.arrayFilter(Se);const he=Pe(ce.forEach);r.arrayForEach(he);const ve=Pe(ce.includes);r.arrayIncludes(ve);const je=Pe(ce.join);r.arrayJoin(je);const ke=Pe(ce.map);r.arrayMap(ke);const Ae=Pe(ce.pop);r.arrayPop(Ae);const Te=Pe(ce.push);r.arrayPush(Te);const xe=Pe(ce.slice);r.arraySlice(xe);const Ie=Pe(ce.some);r.arraySome(Ie);const Oe=Pe(ce.sort);r.arraySort(Oe);const _e=Pe(ce[W]);r.iterateArray(_e);const Ce=Pe(le.set);r.mapSet(Ce);const Fe=Pe(le.get);r.mapGet(Fe);const Ne=Pe(le.has);r.mapHas(Ne);const Ve=Pe(le[W]);r.iterateMap(Ve);const Re=Pe(ue.add);r.setAdd(Re);const Me=Pe(ue.delete);r.setDelete(Me);const Le=Pe(ue.forEach);r.setForEach(Le);const $e=Pe(ue.has);r.setHas($e);const Ge=Pe(ue[W]);r.iterateSet(Ge);const De=Pe(me.test);r.regexpTest(De);const Ue=Pe(me.exec);r.regexpExec(Ue);const He=Pe(me[B]);r.matchAllRegExp(He);const We=Pe(ye.endsWith);r.stringEndsWith(We);const Be=Pe(ye.includes);r.stringIncludes(Be);const ze=Pe(ye.indexOf);r.stringIndexOf(ze);const Ke=Pe(ye.match);r.stringMatch(Ke);const Je=Pe(ye.replace);r.stringReplace(Je);const qe=Pe(ye.search);r.stringSearch(qe);const Ye=Pe(ye.slice);r.stringSlice(Ye);const Xe=Pe(ye.split);r.stringSplit(Xe);const Ze=Pe(ye.startsWith);r.stringStartsWith(Ze);const Qe=Pe(ye[W]);r.iterateString(Qe);const et=Pe(fe.delete);r.weakmapDelete(et);const tt=Pe(fe.get);r.weakmapGet(tt);const rt=Pe(fe.has);r.weakmapHas(rt);const ot=Pe(fe.set);r.weakmapSet(ot);const nt=Pe(ge.add);r.weaksetAdd(nt);const st=Pe(ge.get);r.weaksetGet(st);const at=Pe(ge.has);r.weaksetHas(at);const it=Pe(de.toString);r.functionToString(it);const{all:ct}=u;r.promiseAll((e=>Z(ct,u,[e])));const lt=Pe(Ee.catch);r.promiseCatch(lt);const pt=Pe(Ee.then);r.promiseThen(pt),r.getConstructorOf((e=>ee(F(e),"constructor")));const mt=I(A(null));r.immutableObject(mt),r.isObject((e=>m(e)===e)),r.isError((e=>e instanceof w));const ut=eval;r.FERAL_EVAL(ut);const yt=Function;r.FERAL_FUNCTION(yt),r.noEvalEvaluate((()=>{throw new j('Cannot eval with evalTaming set to "noEval" (SES_NO_EVAL)')}))},({imports:e,liveVar:t,onceVar:r})=>{e([])},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g;e([["../commons.js",[["Set",[e=>o=e]],["String",[e=>n=e]],["arrayJoin",[e=>s=e]],["arraySlice",[e=>a=e]],["freeze",[e=>i=e]],["is",[e=>c=e]],["isError",[e=>l=e]],["setAdd",[e=>p=e]],["setHas",[e=>m=e]],["stringIncludes",[e=>u=e]],["stringStartsWith",[e=>y=e]],["stringifyJson",[e=>f=e]],["toStringTagSymbol",[e=>g=e]]]]]),r.enJoin(((e,t)=>{if(0===e.length)return"(none)";if(1===e.length)return e[0];if(2===e.length){const[r,o]=e;return`${r} ${t} ${o}`}return`${s(a(e,0,-1),", ")}, ${t} ${e[e.length-1]}`}));const d=e=>(e=""+e).length>=1&&u("aeiouAEIOU",e[0])?"an "+e:"a "+e;r.an(d),i(d);const E=(e,t)=>{const r=new o,s=(e,t)=>{switch(typeof t){case"object":return null===t?null:m(r,t)?"[Seen]":(p(r,t),l(t)?`[${t.name}: ${t.message}]`:g in t?`[${t[g]}]`:t);case"function":return`[Function ${t.name||"<anon>"}]`;case"string":return y(t,"[")?`[${t}]`:t;case"undefined":case"symbol":return`[${n(t)}]`;case"bigint":return`[${t}n]`;case"number":return c(t,NaN)?"[NaN]":t===1/0?"[Infinity]":t===-1/0?"[-Infinity]":t;default:return t}};try{return f(e,s,t)}catch(e){return"[Something that failed to stringify]"}};r.bestEffortStringify(E),i(E)},({imports:e,liveVar:t,onceVar:r})=>{e([])},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w,S,h,v,j;e([["../commons.js",[["RangeError",[e=>o=e]],["TypeError",[e=>n=e]],["WeakMap",[e=>s=e]],["arrayJoin",[e=>a=e]],["arrayMap",[e=>i=e]],["arrayPop",[e=>c=e]],["arrayPush",[e=>l=e]],["assign",[e=>p=e]],["freeze",[e=>m=e]],["globalThis",[e=>u=e]],["is",[e=>y=e]],["isError",[e=>f=e]],["stringIndexOf",[e=>g=e]],["stringReplace",[e=>d=e]],["stringSlice",[e=>E=e]],["stringStartsWith",[e=>b=e]],["weakmapDelete",[e=>P=e]],["weakmapGet",[e=>w=e]],["weakmapHas",[e=>S=e]],["weakmapSet",[e=>h=e]]]],["./stringify-utils.js",[["an",[e=>v=e]],["bestEffortStringify",[e=>j=e]]]],["./types.js",[]],["./internal-types.js",[]]]);const k=new s,A=(e,t)=>{const r=m({toString:m((()=>j(e,t)))});return h(k,r,e),r};m(A);const T=new s,x=({template:e,args:t})=>{const r=[e[0]];for(let o=0;o<t.length;o+=1){const n=t[o];let s;s=S(k,n)?""+n:f(n)?`(${v(n.name)})`:`(${v(typeof n)})`,l(r,s,e[o+1])}return a(r,"")},I=m({toString(){const e=w(T,this);return void 0===e?"[Not a DetailsToken]":x(e)}});m(I.toString);const O=(e,...t)=>{const r=m({__proto__:I});return h(T,r,{template:e,args:t}),r};m(O);const _=(e,...t)=>(t=i(t,(e=>S(k,e)?e:A(e))),O(e,...t));r.unredactedDetails(_),m(_);const C=({template:e,args:t})=>{const r=[e[0]];for(let o=0;o<t.length;o+=1){let n=t[o];S(k,n)&&(n=w(k,n));const s=d(c(r)||"",/ $/,"");""!==s&&l(r,s);const a=d(e[o+1],/^ /,"");l(r,n,a)}return""===r[r.length-1]&&c(r),r},F=new s;let N=0;const V=new s,R=(e,t=e.name)=>{let r=w(V,e);return void 0!==r||(N+=1,r=`${t}#${N}`,h(V,e,r)),r},M=(e=O`Assert failed`,t=u.Error,{errorName:r}={})=>{"string"==typeof e&&(e=O([e]));const o=w(T,e);if(void 0===o)throw new n("unrecognized details "+A(e));const s=new t(x(o));return h(F,s,C(o)),void 0!==r&&R(s,r),s};m(M);const L=new s,$=new s,G=(e,t)=>{"string"==typeof t&&(t=O([t]));const r=w(T,t);if(void 0===r)throw new n("unrecognized details "+A(t));const o=C(r),s=w($,e);if(void 0!==s)for(const t of s)t(e,o);else{const t=w(L,e);void 0!==t?l(t,o):h(L,e,[o])}};m(G);const D={getStackString:u.getStackString||(e=>{if(!("stack"in e))return"";const t=""+e.stack,r=g(t,"\n");return b(t," ")||-1===r?t:E(t,r+1)}),tagError:e=>R(e),resetErrorTagNum:()=>{N=0},getMessageLogArgs:e=>w(F,e),takeMessageLogArgs:e=>{const t=w(F,e);return P(F,e),t},takeNoteLogArgsArray:(e,t)=>{const r=w(L,e);if(P(L,e),void 0!==t){const r=w($,e);r?l(r,t):h($,e,[t])}return r||[]}};r.loggedErrorHandler(D),m(D);const U=(e,t=!1)=>{const r=t?_:O,s=(t=r`Assert failed`,o=u.Error)=>{const n=M(t,o);throw void 0!==e&&e(n),n};function a(e,t=r`Check failed`,o=u.Error){if(!e)throw s(t,o)}m(s);const i=(e,t,n=r`Expected ${e} is same as ${t}`,s=o)=>{a(y(e,t),n,s)};m(i);const c=(e,t,o)=>{a("string"==typeof t,r`${A(t)} must be a string`),void 0===o&&(o=r([""," must be "+v(t)],e)),i(typeof e,t,o,n)};m(c);const l=p(a,{error:M,fail:s,equal:i,typeof:c,string:(e,t)=>c(e,"string",t),note:G,details:r,quote:A,makeAssert:U});return m(l)};r.makeAssert(U),m(U);const H=U();r.assert(H)},({imports:e,liveVar:t,onceVar:r})=>{let o,n;e([["./commons.js",[["FERAL_FUNCTION",[e=>o=e]],["arrayJoin",[e=>n=e]]]]]),r.makeEvaluateFactory(((e=[])=>{const t=function(e){return 0===e.length?"":`const {${n(e,",")}} = this;`}(e);return o(`\n    with (this) {\n      ${t}\n      return function() {\n        'use strict';\n        return eval(arguments[0]);\n      };\n    }\n  `)}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c;e([["./commons.js",[["arrayFilter",[e=>o=e]],["arrayIncludes",[e=>n=e]],["getOwnPropertyDescriptor",[e=>s=e]],["getOwnPropertyNames",[e=>a=e]],["objectHasOwnProperty",[e=>i=e]],["regexpTest",[e=>c=e]]]]]);const l=["await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","let","static","enum","implements","package","protected","interface","private","public","await","null","true","false","this","arguments"],p=/^[a-zA-Z_$][\w$]*$/,m=e=>"eval"!==e&&!n(l,e)&&c(p,e);function u(e,t){const r=s(e,t);return!1===r.configurable&&!1===r.writable&&i(r,"value")}r.isValidIdentifierName(m),r.getScopeConstants(((e,t={})=>{const r=a(e),s=a(t),i=o(s,(e=>m(e)&&u(t,e)));return[...o(r,(t=>!n(s,t)&&m(t)&&u(e,t))),...i]}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E;e([["./commons.js",[["FERAL_EVAL",[e=>o=e]],["Proxy",[e=>n=e]],["String",[e=>s=e]],["TypeError",[e=>a=e]],["create",[e=>i=e]],["freeze",[e=>c=e]],["getOwnPropertyDescriptor",[e=>l=e]],["getOwnPropertyDescriptors",[e=>p=e]],["globalThis",[e=>m=e]],["immutableObject",[e=>u=e]],["objectHasOwnProperty",[e=>y=e]],["reflectGet",[e=>f=e]],["reflectSet",[e=>g=e]],["seal",[e=>d=e]]]],["./error/assert.js",[["assert",[e=>E=e]]]]]);const{details:b,quote:P}=E,w=new n(u,c({get(e,t){E.fail(b`Please report unexpected scope handler trap: ${P(s(t))}`)}}));r.createScopeHandler(((e,t={},{sloppyGlobalsMode:r=!1}={})=>{const n={allowNextEvalToBeUnsafe:!1};d(n);const u=c(i(w,p({get(r,s){if("symbol"!=typeof s)return"eval"===s&&!0===n.allowNextEvalToBeUnsafe?(n.allowNextEvalToBeUnsafe=!1,o):s in t?f(t,s,e):f(e,s)},set(r,o,n){if(o in t){const r=l(t,o);return y(r,"value")?g(t,o,n):g(t,o,n,e)}return g(e,o,n)},has:(o,s)=>r||n.allowNextEvalToBeUnsafe&&"eval"===s||s in t||s in e||s in m,getPrototypeOf:()=>null,getOwnPropertyDescriptor(e,t){const r=P(s(t));console.warn("getOwnPropertyDescriptor trap on scopeHandler for "+r,(new a).stack)}})));return{scopeController:n,scopeHandler:u}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s;e([["./commons.js",[["FERAL_REG_EXP",[e=>o=e]],["regexpExec",[e=>n=e]],["stringSlice",[e=>s=e]]]]]);const a=new o("(?:\\s*//\\s*[@#]\\s*([a-zA-Z][a-zA-Z0-9]*)\\s*=\\s*([^\\s\\*]*)|/\\*\\s*[@#]\\s*([a-zA-Z][a-zA-Z0-9]*)\\s*=\\s*([^\\s\\*]*)\\s*\\*/)\\s*$");r.getSourceURL((e=>{let t="<unknown>";for(;e.length>0;){const r=n(a,e);if(null===r)break;e=s(e,0,e.length-r[0].length),"sourceURL"===r[3]?t=r[4]:"sourceURL"===r[1]&&(t=r[2])}return t}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l;function p(e,t){const r=a(e,t);if(r<0)return-1;const o="\n"===e[r]?1:0;return c(i(e,0,r),"\n").length+o}e([["./commons.js",[["FERAL_REG_EXP",[e=>o=e]],["SyntaxError",[e=>n=e]],["stringReplace",[e=>s=e]],["stringSearch",[e=>a=e]],["stringSlice",[e=>i=e]],["stringSplit",[e=>c=e]]]],["./get-source-url.js",[["getSourceURL",[e=>l=e]]]]]);const m=new o("(?:\x3c!--|--\x3e)","g"),u=e=>{const t=p(e,m);if(t<0)return e;const r=l(e);throw new n(`Possible HTML comment rejected at ${r}:${t}. (SES_HTML_COMMENT_REJECTED)`)};r.rejectHtmlComments(u),r.evadeHtmlCommentTest((e=>s(e,m,(e=>"<"===e[0]?"< ! --":"-- >"))));const y=new o("(^|[^.])\\bimport(\\s*(?:\\(|/[/*]))","g"),f=e=>{const t=p(e,y);if(t<0)return e;const r=l(e);throw new n(`Possible import expression rejected at ${r}:${t}. (SES_IMPORT_REJECTED)`)};r.rejectImportExpressions(f),r.evadeImportExpressionTest((e=>s(e,y,((e,t,r)=>`${t}__import__${r}`))));const g=new o("(^|[^.])\\beval(\\s*\\()","g");r.rejectSomeDirectEvalExpressions((e=>{const t=p(e,g);if(t<0)return e;const r=l(e);throw new n(`Possible direct eval expression rejected at ${r}:${t}. (SES_EVAL_REJECTED)`)})),r.mandatoryTransforms((e=>(e=u(e),f(e)))),r.applyTransforms(((e,t)=>{for(const r of t)e=r(e);return e}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y;e([["./commons.js",[["WeakSet",[e=>o=e]],["apply",[e=>n=e]],["immutableObject",[e=>s=e]],["proxyRevocable",[e=>a=e]],["weaksetAdd",[e=>i=e]]]],["./scope-constants.js",[["getScopeConstants",[e=>c=e]]]],["./scope-handler.js",[["createScopeHandler",[e=>l=e]]]],["./transforms.js",[["applyTransforms",[e=>p=e]],["mandatoryTransforms",[e=>m=e]]]],["./make-evaluate-factory.js",[["makeEvaluateFactory",[e=>u=e]]]],["./error/assert.js",[["assert",[e=>y=e]]]]]);const{details:f}=y;r.makeSafeEvaluator((({globalObject:e,globalLexicals:t={},globalTransforms:r=[],sloppyGlobalsMode:g=!1,knownScopeProxies:d=new o}={})=>{const{scopeHandler:E,scopeController:b}=l(e,t,{sloppyGlobalsMode:g}),{proxy:P,revoke:w}=a(s,E);let S;return i(d,P),{safeEvaluate:(o,{localTransforms:s=[]}={})=>{let a;(()=>{if(!S){const r=c(e,t),o=u(r);S=n(o,P,[])}})(),o=p(o,[...s,...r,m]),b.allowNextEvalToBeUnsafe=!0;try{return n(S,e,[o])}catch(e){throw a=e,e}finally{const e=b.allowNextEvalToBeUnsafe;b.allowNextEvalToBeUnsafe=!1,e&&(w(),y.fail(f`handler did not reset allowNextEvalToBeUnsafe ${a}`))}}}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m;e([["./commons.js",[["TypeError",[e=>o=e]],["arrayPush",[e=>n=e]],["create",[e=>s=e]],["defineProperties",[e=>a=e]],["getOwnPropertyDescriptors",[e=>i=e]]]],["./transforms.js",[["evadeHtmlCommentTest",[e=>c=e]],["evadeImportExpressionTest",[e=>l=e]],["rejectSomeDirectEvalExpressions",[e=>p=e]]]],["./make-safe-evaluator.js",[["makeSafeEvaluator",[e=>m=e]]]]]);const u=(e,t)=>{const{sloppyGlobalsMode:r=!1,__moduleShimLexicals__:o}=t;let n;if(void 0!==o||r){let{globalTransforms:t}=e;const{globalObject:c,globalLexicals:l,knownScopeProxies:p}=e;let u=l;void 0!==o&&(t=void 0,u=s(null,i(l)),a(u,i(o))),({safeEvaluate:n}=m({globalObject:c,globalLexicals:u,globalTransforms:t,sloppyGlobalsMode:r,knownScopeProxies:p}))}else({safeEvaluate:n}=e);return{safeEvaluate:n}};r.provideCompartmentEvaluator(u),r.compartmentEvaluate(((e,t,r)=>{if("string"!=typeof t)throw new o("first argument of evaluate() must be a string");const{transforms:s=[],__evadeHtmlCommentTest__:a=!1,__evadeImportExpressionTest__:i=!1,__rejectSomeDirectEvalExpressions__:m=!0}=r,y=[...s];!0===a&&n(y,c),!0===i&&n(y,l),!0===m&&n(y,p);const{safeEvaluate:f}=u(e,r);return f(t,{localTransforms:y})}))},({imports:e,liveVar:t,onceVar:r})=>{e([]),r.makeEvalFunction((e=>t=>"string"!=typeof t?t:e(t)))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c;e([["./commons.js",[["FERAL_FUNCTION",[e=>o=e]],["arrayJoin",[e=>n=e]],["arrayPop",[e=>s=e]],["defineProperties",[e=>a=e]],["getPrototypeOf",[e=>i=e]]]],["./error/assert.js",[["assert",[e=>c=e]]]]]),r.makeFunctionConstructor((e=>{const t=function(t){const r=""+(s(arguments)||""),a=""+n(arguments,",");new o(a,""),new o(r);const i=`(function anonymous(${a}\n) {\n${r}\n})`;return e(i)};return a(t,{prototype:{value:o.prototype,writable:!1,enumerable:!1,configurable:!1}}),c(i(o)===o.prototype,"Function prototype is the same accross compartments"),c(i(t)===o.prototype,"Function constructor prototype is the same accross compartments"),t}))},({imports:e,liveVar:t,onceVar:r})=>{e([]);r.constantProperties({Infinity:1/0,NaN:NaN,undefined:void 0}),r.universalPropertyNames({isFinite:"isFinite",isNaN:"isNaN",parseFloat:"parseFloat",parseInt:"parseInt",decodeURI:"decodeURI",decodeURIComponent:"decodeURIComponent",encodeURI:"encodeURI",encodeURIComponent:"encodeURIComponent",Array:"Array",ArrayBuffer:"ArrayBuffer",BigInt:"BigInt",BigInt64Array:"BigInt64Array",BigUint64Array:"BigUint64Array",Boolean:"Boolean",DataView:"DataView",EvalError:"EvalError",Float32Array:"Float32Array",Float64Array:"Float64Array",Int8Array:"Int8Array",Int16Array:"Int16Array",Int32Array:"Int32Array",Map:"Map",Number:"Number",Object:"Object",Promise:"Promise",Proxy:"Proxy",RangeError:"RangeError",ReferenceError:"ReferenceError",Set:"Set",String:"String",Symbol:"Symbol",SyntaxError:"SyntaxError",TypeError:"TypeError",Uint8Array:"Uint8Array",Uint8ClampedArray:"Uint8ClampedArray",Uint16Array:"Uint16Array",Uint32Array:"Uint32Array",URIError:"URIError",WeakMap:"WeakMap",WeakSet:"WeakSet",JSON:"JSON",Reflect:"Reflect",escape:"escape",unescape:"unescape",lockdown:"lockdown",harden:"harden",HandledPromise:"HandledPromise"}),r.initialGlobalPropertyNames({Date:"%InitialDate%",Error:"%InitialError%",RegExp:"%InitialRegExp%",Math:"%InitialMath%",getStackString:"%InitialGetStackString%"}),r.sharedGlobalPropertyNames({Date:"%SharedDate%",Error:"%SharedError%",RegExp:"%SharedRegExp%",Math:"%SharedMath%"}),r.uniqueGlobalPropertyNames({globalThis:"%UniqueGlobalThis%",eval:"%UniqueEval%",Function:"%UniqueFunction%",Compartment:"%UniqueCompartment%"});const o=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError];r.NativeErrors(o);const n={"[[Proto]]":"%FunctionPrototype%",length:"number",name:"string"};r.FunctionInstance(n);const s=n,a={"[[Proto]]":"%AsyncFunctionPrototype%"},i={get:s,set:"undefined"},c={get:s,set:s};function l(e){return{"[[Proto]]":"%SharedError%",prototype:e}}function p(e){return{"[[Proto]]":"%ErrorPrototype%",constructor:e,message:"string",name:"string",toString:!1,cause:!1}}function m(e){return{"[[Proto]]":"%TypedArray%",BYTES_PER_ELEMENT:"number",prototype:e}}function u(e){return{"[[Proto]]":"%TypedArrayPrototype%",BYTES_PER_ELEMENT:"number",constructor:e}}r.isAccessorPermit((e=>e===i||e===c));const y={E:"number",LN10:"number",LN2:"number",LOG10E:"number",LOG2E:"number",PI:"number",SQRT1_2:"number",SQRT2:"number","@@toStringTag":"string",abs:s,acos:s,acosh:s,asin:s,asinh:s,atan:s,atanh:s,atan2:s,cbrt:s,ceil:s,clz32:s,cos:s,cosh:s,exp:s,expm1:s,floor:s,fround:s,hypot:s,imul:s,log:s,log1p:s,log10:s,log2:s,max:s,min:s,pow:s,round:s,sign:s,sin:s,sinh:s,sqrt:s,tan:s,tanh:s,trunc:s,idiv:!1,idivmod:!1,imod:!1,imuldiv:!1,irem:!1,mod:!1},f={"[[Proto]]":null,"%ThrowTypeError%":s,Infinity:"number",NaN:"number",undefined:"undefined","%UniqueEval%":s,isFinite:s,isNaN:s,parseFloat:s,parseInt:s,decodeURI:s,decodeURIComponent:s,encodeURI:s,encodeURIComponent:s,Object:{"[[Proto]]":"%FunctionPrototype%",assign:s,create:s,defineProperties:s,defineProperty:s,entries:s,freeze:s,fromEntries:s,getOwnPropertyDescriptor:s,getOwnPropertyDescriptors:s,getOwnPropertyNames:s,getOwnPropertySymbols:s,getPrototypeOf:s,hasOwn:s,is:s,isExtensible:s,isFrozen:s,isSealed:s,keys:s,preventExtensions:s,prototype:"%ObjectPrototype%",seal:s,setPrototypeOf:s,values:s},"%ObjectPrototype%":{"[[Proto]]":null,constructor:"Object",hasOwnProperty:s,isPrototypeOf:s,propertyIsEnumerable:s,toLocaleString:s,toString:s,valueOf:s,"--proto--":c,__defineGetter__:s,__defineSetter__:s,__lookupGetter__:s,__lookupSetter__:s},"%UniqueFunction%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%FunctionPrototype%"},"%InertFunction%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%FunctionPrototype%"},"%FunctionPrototype%":{apply:s,bind:s,call:s,constructor:"%InertFunction%",toString:s,"@@hasInstance":s,caller:!1,arguments:!1},Boolean:{"[[Proto]]":"%FunctionPrototype%",prototype:"%BooleanPrototype%"},"%BooleanPrototype%":{constructor:"Boolean",toString:s,valueOf:s},Symbol:{"[[Proto]]":"%FunctionPrototype%",asyncIterator:"symbol",for:s,hasInstance:"symbol",isConcatSpreadable:"symbol",iterator:"symbol",keyFor:s,match:"symbol",matchAll:"symbol",prototype:"%SymbolPrototype%",replace:"symbol",search:"symbol",species:"symbol",split:"symbol",toPrimitive:"symbol",toStringTag:"symbol",unscopables:"symbol"},"%SymbolPrototype%":{constructor:"Symbol",description:i,toString:s,valueOf:s,"@@toPrimitive":s,"@@toStringTag":"string"},"%InitialError%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%ErrorPrototype%",captureStackTrace:s,stackTraceLimit:c,prepareStackTrace:c},"%SharedError%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%ErrorPrototype%",captureStackTrace:s,stackTraceLimit:c,prepareStackTrace:c},"%ErrorPrototype%":{constructor:"%SharedError%",message:"string",name:"string",toString:s,at:!1,stack:!1,cause:!1},EvalError:l("%EvalErrorPrototype%"),RangeError:l("%RangeErrorPrototype%"),ReferenceError:l("%ReferenceErrorPrototype%"),SyntaxError:l("%SyntaxErrorPrototype%"),TypeError:l("%TypeErrorPrototype%"),URIError:l("%URIErrorPrototype%"),"%EvalErrorPrototype%":p("EvalError"),"%RangeErrorPrototype%":p("RangeError"),"%ReferenceErrorPrototype%":p("ReferenceError"),"%SyntaxErrorPrototype%":p("SyntaxError"),"%TypeErrorPrototype%":p("TypeError"),"%URIErrorPrototype%":p("URIError"),Number:{"[[Proto]]":"%FunctionPrototype%",EPSILON:"number",isFinite:s,isInteger:s,isNaN:s,isSafeInteger:s,MAX_SAFE_INTEGER:"number",MAX_VALUE:"number",MIN_SAFE_INTEGER:"number",MIN_VALUE:"number",NaN:"number",NEGATIVE_INFINITY:"number",parseFloat:s,parseInt:s,POSITIVE_INFINITY:"number",prototype:"%NumberPrototype%"},"%NumberPrototype%":{constructor:"Number",toExponential:s,toFixed:s,toLocaleString:s,toPrecision:s,toString:s,valueOf:s},BigInt:{"[[Proto]]":"%FunctionPrototype%",asIntN:s,asUintN:s,prototype:"%BigIntPrototype%",bitLength:!1,fromArrayBuffer:!1},"%BigIntPrototype%":{constructor:"BigInt",toLocaleString:s,toString:s,valueOf:s,"@@toStringTag":"string"},"%InitialMath%":{...y,random:s},"%SharedMath%":y,"%InitialDate%":{"[[Proto]]":"%FunctionPrototype%",now:s,parse:s,prototype:"%DatePrototype%",UTC:s},"%SharedDate%":{"[[Proto]]":"%FunctionPrototype%",now:s,parse:s,prototype:"%DatePrototype%",UTC:s},"%DatePrototype%":{constructor:"%SharedDate%",getDate:s,getDay:s,getFullYear:s,getHours:s,getMilliseconds:s,getMinutes:s,getMonth:s,getSeconds:s,getTime:s,getTimezoneOffset:s,getUTCDate:s,getUTCDay:s,getUTCFullYear:s,getUTCHours:s,getUTCMilliseconds:s,getUTCMinutes:s,getUTCMonth:s,getUTCSeconds:s,setDate:s,setFullYear:s,setHours:s,setMilliseconds:s,setMinutes:s,setMonth:s,setSeconds:s,setTime:s,setUTCDate:s,setUTCFullYear:s,setUTCHours:s,setUTCMilliseconds:s,setUTCMinutes:s,setUTCMonth:s,setUTCSeconds:s,toDateString:s,toISOString:s,toJSON:s,toLocaleDateString:s,toLocaleString:s,toLocaleTimeString:s,toString:s,toTimeString:s,toUTCString:s,valueOf:s,"@@toPrimitive":s,getYear:s,setYear:s,toGMTString:s},String:{"[[Proto]]":"%FunctionPrototype%",fromCharCode:s,fromCodePoint:s,prototype:"%StringPrototype%",raw:s,fromArrayBuffer:!1},"%StringPrototype%":{length:"number",at:s,charAt:s,charCodeAt:s,codePointAt:s,concat:s,constructor:"String",endsWith:s,includes:s,indexOf:s,lastIndexOf:s,localeCompare:s,match:s,matchAll:s,normalize:s,padEnd:s,padStart:s,repeat:s,replace:s,replaceAll:s,search:s,slice:s,split:s,startsWith:s,substring:s,toLocaleLowerCase:s,toLocaleUpperCase:s,toLowerCase:s,toString:s,toUpperCase:s,trim:s,trimEnd:s,trimStart:s,valueOf:s,"@@iterator":s,substr:s,anchor:s,big:s,blink:s,bold:s,fixed:s,fontcolor:s,fontsize:s,italics:s,link:s,small:s,strike:s,sub:s,sup:s,trimLeft:s,trimRight:s,compare:!1},"%StringIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:s,"@@toStringTag":"string"},"%InitialRegExp%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%RegExpPrototype%","@@species":i,input:!1,$_:!1,lastMatch:!1,"$&":!1,lastParen:!1,"$+":!1,leftContext:!1,"$`":!1,rightContext:!1,"$'":!1,$1:!1,$2:!1,$3:!1,$4:!1,$5:!1,$6:!1,$7:!1,$8:!1,$9:!1},"%SharedRegExp%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%RegExpPrototype%","@@species":i},"%RegExpPrototype%":{constructor:"%SharedRegExp%",exec:s,dotAll:i,flags:i,global:i,ignoreCase:i,"@@match":s,"@@matchAll":s,multiline:i,"@@replace":s,"@@search":s,source:i,"@@split":s,sticky:i,test:s,toString:s,unicode:i,compile:!1,hasIndices:!1},"%RegExpStringIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:s,"@@toStringTag":"string"},Array:{"[[Proto]]":"%FunctionPrototype%",from:s,isArray:s,of:s,prototype:"%ArrayPrototype%","@@species":i,at:s},"%ArrayPrototype%":{at:s,length:"number",concat:s,constructor:"Array",copyWithin:s,entries:s,every:s,fill:s,filter:s,find:s,findIndex:s,flat:s,flatMap:s,forEach:s,includes:s,indexOf:s,join:s,keys:s,lastIndexOf:s,map:s,pop:s,push:s,reduce:s,reduceRight:s,reverse:s,shift:s,slice:s,some:s,sort:s,splice:s,toLocaleString:s,toString:s,unshift:s,values:s,"@@iterator":s,"@@unscopables":{"[[Proto]]":null,copyWithin:"boolean",entries:"boolean",fill:"boolean",find:"boolean",findIndex:"boolean",flat:"boolean",flatMap:"boolean",includes:"boolean",keys:"boolean",values:"boolean",at:!1,findLast:"boolean",findLastIndex:"boolean"},findLast:s,findLastIndex:s},"%ArrayIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:s,"@@toStringTag":"string"},"%TypedArray%":{"[[Proto]]":"%FunctionPrototype%",from:s,of:s,prototype:"%TypedArrayPrototype%","@@species":i},"%TypedArrayPrototype%":{at:s,buffer:i,byteLength:i,byteOffset:i,constructor:"%TypedArray%",copyWithin:s,entries:s,every:s,fill:s,filter:s,find:s,findIndex:s,forEach:s,includes:s,indexOf:s,join:s,keys:s,lastIndexOf:s,length:i,map:s,reduce:s,reduceRight:s,reverse:s,set:s,slice:s,some:s,sort:s,subarray:s,toLocaleString:s,toString:s,values:s,"@@iterator":s,"@@toStringTag":i,findLast:s,findLastIndex:s},BigInt64Array:m("%BigInt64ArrayPrototype%"),BigUint64Array:m("%BigUint64ArrayPrototype%"),Float32Array:m("%Float32ArrayPrototype%"),Float64Array:m("%Float64ArrayPrototype%"),Int16Array:m("%Int16ArrayPrototype%"),Int32Array:m("%Int32ArrayPrototype%"),Int8Array:m("%Int8ArrayPrototype%"),Uint16Array:m("%Uint16ArrayPrototype%"),Uint32Array:m("%Uint32ArrayPrototype%"),Uint8Array:m("%Uint8ArrayPrototype%"),Uint8ClampedArray:m("%Uint8ClampedArrayPrototype%"),"%BigInt64ArrayPrototype%":u("BigInt64Array"),"%BigUint64ArrayPrototype%":u("BigUint64Array"),"%Float32ArrayPrototype%":u("Float32Array"),"%Float64ArrayPrototype%":u("Float64Array"),"%Int16ArrayPrototype%":u("Int16Array"),"%Int32ArrayPrototype%":u("Int32Array"),"%Int8ArrayPrototype%":u("Int8Array"),"%Uint16ArrayPrototype%":u("Uint16Array"),"%Uint32ArrayPrototype%":u("Uint32Array"),"%Uint8ArrayPrototype%":u("Uint8Array"),"%Uint8ClampedArrayPrototype%":u("Uint8ClampedArray"),Map:{"[[Proto]]":"%FunctionPrototype%","@@species":i,prototype:"%MapPrototype%"},"%MapPrototype%":{clear:s,constructor:"Map",delete:s,entries:s,forEach:s,get:s,has:s,keys:s,set:s,size:i,values:s,"@@iterator":s,"@@toStringTag":"string"},"%MapIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:s,"@@toStringTag":"string"},Set:{"[[Proto]]":"%FunctionPrototype%",prototype:"%SetPrototype%","@@species":i},"%SetPrototype%":{add:s,clear:s,constructor:"Set",delete:s,entries:s,forEach:s,has:s,keys:s,size:i,values:s,"@@iterator":s,"@@toStringTag":"string"},"%SetIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:s,"@@toStringTag":"string"},WeakMap:{"[[Proto]]":"%FunctionPrototype%",prototype:"%WeakMapPrototype%"},"%WeakMapPrototype%":{constructor:"WeakMap",delete:s,get:s,has:s,set:s,"@@toStringTag":"string"},WeakSet:{"[[Proto]]":"%FunctionPrototype%",prototype:"%WeakSetPrototype%"},"%WeakSetPrototype%":{add:s,constructor:"WeakSet",delete:s,has:s,"@@toStringTag":"string"},ArrayBuffer:{"[[Proto]]":"%FunctionPrototype%",isView:s,prototype:"%ArrayBufferPrototype%","@@species":i,fromString:!1,fromBigInt:!1},"%ArrayBufferPrototype%":{byteLength:i,constructor:"ArrayBuffer",slice:s,"@@toStringTag":"string",concat:!1,transfer:s,resize:s,resizable:i,maxByteLength:i},SharedArrayBuffer:!1,"%SharedArrayBufferPrototype%":!1,DataView:{"[[Proto]]":"%FunctionPrototype%",BYTES_PER_ELEMENT:"number",prototype:"%DataViewPrototype%"},"%DataViewPrototype%":{buffer:i,byteLength:i,byteOffset:i,constructor:"DataView",getBigInt64:s,getBigUint64:s,getFloat32:s,getFloat64:s,getInt8:s,getInt16:s,getInt32:s,getUint8:s,getUint16:s,getUint32:s,setBigInt64:s,setBigUint64:s,setFloat32:s,setFloat64:s,setInt8:s,setInt16:s,setInt32:s,setUint8:s,setUint16:s,setUint32:s,"@@toStringTag":"string"},Atomics:!1,JSON:{parse:s,stringify:s,"@@toStringTag":"string"},"%IteratorPrototype%":{"@@iterator":s},"%AsyncIteratorPrototype%":{"@@asyncIterator":s},"%InertGeneratorFunction%":{"[[Proto]]":"%InertFunction%",prototype:"%Generator%"},"%Generator%":{"[[Proto]]":"%FunctionPrototype%",constructor:"%InertGeneratorFunction%",prototype:"%GeneratorPrototype%","@@toStringTag":"string"},"%InertAsyncGeneratorFunction%":{"[[Proto]]":"%InertFunction%",prototype:"%AsyncGenerator%"},"%AsyncGenerator%":{"[[Proto]]":"%FunctionPrototype%",constructor:"%InertAsyncGeneratorFunction%",prototype:"%AsyncGeneratorPrototype%","@@toStringTag":"string"},"%GeneratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",constructor:"%Generator%",next:s,return:s,throw:s,"@@toStringTag":"string"},"%AsyncGeneratorPrototype%":{"[[Proto]]":"%AsyncIteratorPrototype%",constructor:"%AsyncGenerator%",next:s,return:s,throw:s,"@@toStringTag":"string"},HandledPromise:{"[[Proto]]":"Promise",applyFunction:s,applyFunctionSendOnly:s,applyMethod:s,applyMethodSendOnly:s,get:s,getSendOnly:s,prototype:"%PromisePrototype%",resolve:s},Promise:{"[[Proto]]":"%FunctionPrototype%",all:s,allSettled:s,any:!1,prototype:"%PromisePrototype%",race:s,reject:s,resolve:s,"@@species":i},"%PromisePrototype%":{catch:s,constructor:"Promise",finally:s,then:s,"@@toStringTag":"string","UniqueSymbol(async_id_symbol)":c,"UniqueSymbol(trigger_async_id_symbol)":c,"UniqueSymbol(destroyed)":c},"%InertAsyncFunction%":{"[[Proto]]":"%InertFunction%",prototype:"%AsyncFunctionPrototype%"},"%AsyncFunctionPrototype%":{"[[Proto]]":"%FunctionPrototype%",constructor:"%InertAsyncFunction%","@@toStringTag":"string"},Reflect:{apply:s,construct:s,defineProperty:s,deleteProperty:s,get:s,getOwnPropertyDescriptor:s,getPrototypeOf:s,has:s,isExtensible:s,ownKeys:s,preventExtensions:s,set:s,setPrototypeOf:s,"@@toStringTag":"string"},Proxy:{"[[Proto]]":"%FunctionPrototype%",revocable:s},escape:s,unescape:s,"%UniqueCompartment%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%CompartmentPrototype%",toString:s},"%InertCompartment%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%CompartmentPrototype%",toString:s},"%CompartmentPrototype%":{constructor:"%InertCompartment%",evaluate:s,globalThis:i,name:i,toString:s,__isKnownScopeProxy__:s,import:a,load:a,importNow:s,module:s},lockdown:s,harden:s,"%InitialGetStackString%":s};r.whitelist(f)},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l;e([["./commons.js",[["defineProperty",[e=>o=e]],["objectHasOwnProperty",[e=>n=e]],["entries",[e=>s=e]]]],["./make-eval-function.js",[["makeEvalFunction",[e=>a=e]]]],["./make-function-constructor.js",[["makeFunctionConstructor",[e=>i=e]]]],["./whitelist.js",[["constantProperties",[e=>c=e]],["universalPropertyNames",[e=>l=e]]]]]),r.setGlobalObjectConstantProperties((e=>{for(const[t,r]of s(c))o(e,t,{value:r,writable:!1,enumerable:!1,configurable:!1})})),r.setGlobalObjectMutableProperties(((e,{intrinsics:t,newGlobalPropertyNames:r,makeCompartmentConstructor:a,markVirtualizedNativeFunction:i})=>{for(const[r,a]of s(l))n(t,a)&&o(e,r,{value:t[a],writable:!0,enumerable:!1,configurable:!0});for(const[a,i]of s(r))n(t,i)&&o(e,a,{value:t[i],writable:!0,enumerable:!1,configurable:!0});const c={globalThis:e};c.Compartment=a(a,t,i);for(const[t,r]of s(c))o(e,t,{value:r,writable:!0,enumerable:!1,configurable:!0}),"function"==typeof r&&i(r)})),r.setGlobalObjectEvaluators(((e,t,r)=>{{const n=a(t);r(n),o(e,"eval",{value:n,writable:!0,enumerable:!1,configurable:!0})}{const n=i(t);r(n),o(e,"Function",{value:n,writable:!0,enumerable:!1,configurable:!0})}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w;e([["./commons.js",[["ReferenceError",[e=>o=e]],["TypeError",[e=>n=e]],["Map",[e=>s=e]],["Set",[e=>a=e]],["arrayJoin",[e=>i=e]],["arrayMap",[e=>c=e]],["arrayPush",[e=>l=e]],["create",[e=>p=e]],["freeze",[e=>m=e]],["mapGet",[e=>u=e]],["mapHas",[e=>y=e]],["mapSet",[e=>f=e]],["setAdd",[e=>g=e]],["promiseCatch",[e=>d=e]],["promiseThen",[e=>E=e]],["values",[e=>b=e]],["weakmapGet",[e=>P=e]]]],["./error/assert.js",[["assert",[e=>w=e]]]]]);const{details:S,quote:h}=w,v=()=>{};r.makeAlias(((e,t)=>m({compartment:e,specifier:t})));const j=async(e,t,r,o,n,s,a,i)=>{const{resolveHook:c,moduleRecords:u}=P(e,r),y=((e,t,r)=>{const o=p(null);for(const n of e){const e=t(n,r);o[n]=e}return m(o)})(n.imports,c,o),d=m({compartment:r,staticModuleRecord:n,moduleSpecifier:o,resolvedImports:y});for(const o of b(y)){const n=k(e,t,r,o,s,a,i);g(s,E(n,v,(e=>{l(i,e)})))}return f(u,o,d),d},k=async(e,t,r,a,i,c,l)=>{const{name:p}=P(e,r);let m=u(c,r);void 0===m&&(m=new s,f(c,r,m));let g=u(m,a);return void 0!==g||(g=d((async(e,t,r,s,a,i,c)=>{const{importHook:l,moduleMap:p,moduleMapHook:m,moduleRecords:g}=P(e,r);let d=p[s];if(void 0===d&&void 0!==m&&(d=m(s)),"string"==typeof d)w.fail(S`Cannot map module ${h(s)} to ${h(d)} in parent compartment, not yet implemented`,n);else if(void 0!==d){const r=P(t,d);void 0===r&&w.fail(S`Cannot map module ${h(s)} because the value is not a module exports namespace, or is from another realm`,o);const n=await k(e,t,r.compartment,r.specifier,a,i,c);return f(g,s,n),n}if(y(g,s))return u(g,s);const E=await l(s);if(null!==E&&"object"==typeof E||w.fail(S`importHook must return a promise for an object, for module ${h(s)} in compartment ${h(r.name)}`),void 0!==E.record){const{compartment:o=r,specifier:n=s,record:l}=E,p=await j(e,t,o,n,l,a,i,c);return f(g,s,p),p}return j(e,t,r,s,E,a,i,c)})(e,t,r,a,i,c,l),(e=>{throw w.note(e,S`${e.message}, loading ${h(a)} in compartment ${h(p)}`),e})),f(m,a,g)),g};r.load((async(e,t,r,o)=>{const{name:p}=P(e,r),m=new a,u=new s,y=[],f=k(e,t,r,o,m,u,y);g(m,E(f,v,(e=>{l(y,e)})));for(const e of m)await e;if(y.length>0)throw new n(`Failed to load module ${h(o)} in package ${h(p)} (${y.length} underlying failures: ${i(c(y,(e=>e.message)),", ")}`)}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b;e([["./module-load.js",[["makeAlias",[e=>o=e]]]],["./commons.js",[["Proxy",[e=>n=e]],["TypeError",[e=>s=e]],["create",[e=>a=e]],["freeze",[e=>i=e]],["mapGet",[e=>c=e]],["mapHas",[e=>l=e]],["mapSet",[e=>p=e]],["ownKeys",[e=>m=e]],["reflectGet",[e=>u=e]],["reflectGetOwnPropertyDescriptor",[e=>y=e]],["reflectHas",[e=>f=e]],["reflectIsExtensible",[e=>g=e]],["reflectPreventExtensions",[e=>d=e]],["weakmapSet",[e=>E=e]]]],["./error/assert.js",[["assert",[e=>b=e]]]]]);const{quote:P}=b,w=()=>{let e=!1;const t=a(null);return i({activate(){e=!0},proxiedExports:t,exportsProxy:new n(t,{get(r,o,n){if(!e)throw new s(`Cannot get property ${P(o)} of module exports namespace, the module has not yet begun to execute`);return u(t,o,n)},set(e,t,r){throw new s(`Cannot set property ${P(t)} of module exports namespace`)},has(r,o){if(!e)throw new s(`Cannot check property ${P(o)}, the module has not yet begun to execute`);return f(t,o)},deleteProperty(e,t){throw new s(`Cannot delete property ${P(t)}s of module exports namespace`)},ownKeys(r){if(!e)throw new s("Cannot enumerate keys, the module has not yet begun to execute");return m(t)},getOwnPropertyDescriptor(r,o){if(!e)throw new s(`Cannot get own property descriptor ${P(o)}, the module has not yet begun to execute`);return y(t,o)},preventExtensions(r){if(!e)throw new s("Cannot prevent extensions of module exports namespace, the module has not yet begun to execute");return d(t)},isExtensible(){if(!e)throw new s("Cannot check extensibility of module exports namespace, the module has not yet begun to execute");return g(t)},getPrototypeOf:e=>null,setPrototypeOf(e,t){throw new s("Cannot set prototype of module exports namespace")},defineProperty(e,t,r){throw new s(`Cannot define property ${P(t)} of module exports namespace`)},apply(e,t,r){throw new s("Cannot call module exports namespace, it is not a function")},construct(e,t){throw new s("Cannot construct module exports namespace, it is not a constructor")}})})};r.deferExports(w),r.getDeferredExports(((e,t,r,n)=>{const{deferredExports:s}=t;if(!l(s,n)){const t=w();E(r,t.exportsProxy,o(e,n)),p(s,n,t)}return c(s,n)}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w,S,h;e([["./error/assert.js",[["assert",[e=>o=e]]]],["./module-proxy.js",[["getDeferredExports",[e=>n=e]]]],["./commons.js",[["ReferenceError",[e=>s=e]],["SyntaxError",[e=>a=e]],["TypeError",[e=>i=e]],["arrayForEach",[e=>c=e]],["arrayIncludes",[e=>l=e]],["arrayPush",[e=>p=e]],["arraySome",[e=>m=e]],["arraySort",[e=>u=e]],["create",[e=>y=e]],["defineProperty",[e=>f=e]],["entries",[e=>g=e]],["freeze",[e=>d=e]],["isArray",[e=>E=e]],["keys",[e=>b=e]],["mapGet",[e=>P=e]],["weakmapGet",[e=>w=e]],["reflectHas",[e=>S=e]]]],["./compartment-evaluate.js",[["compartmentEvaluate",[e=>h=e]]]]]);const{quote:v}=o;r.makeThirdPartyModuleInstance(((e,t,r,o,s,a)=>{const{exportsProxy:l,proxiedExports:u,activate:g}=n(r,w(e,r),o,s),b=y(null);if(t.exports){if(!E(t.exports)||m(t.exports,(e=>"string"!=typeof e)))throw new i('SES third-party static module record "exports" property must be an array of strings for module '+s);c(t.exports,(e=>{let t=u[e];const r=[];f(u,e,{get:()=>t,set:e=>{t=e;for(const t of r)t(e)},enumerable:!0,configurable:!1}),b[e]=e=>{p(r,e),e(t)}})),b["*"]=e=>{e(u)}}const P={activated:!1};return d({notifiers:b,exportsProxy:l,execute(){if(S(P,"errorFromExecute"))throw P.errorFromExecute;if(!P.activated){g(),P.activated=!0;try{t.execute(u,r,a)}catch(e){throw P.errorFromExecute=e,e}}}})})),r.makeModuleInstance(((e,t,r,o)=>{const{compartment:m,moduleSpecifier:E,staticModuleRecord:S}=r,{reexports:j=[],__syncModuleProgram__:k,__fixedExportMap__:A={},__liveExportMap__:T={}}=S,x=w(e,m),{__shimTransforms__:I}=x,{exportsProxy:O,proxiedExports:_,activate:C}=n(m,x,t,E),F=y(null),N=y(null),V=y(null),R=y(null),M=y(null),L=y(null);function $(e){const t=y(null);t.default=!1;for(const[r,n]of e){const e=P(o,r);e.execute();const{notifiers:s}=e;for(const[e,t]of n){const o=s[e];if(!o)throw a(`The requested module '${r}' does not provide an export named '${e}'`);for(const e of t)o(e)}if(l(j,r))for(const[e,r]of g(s))void 0===t[e]?t[e]=r:t[e]=!1}for(const[e,r]of g(t))if(!L[e]&&!1!==r){let t;L[e]=r,r((e=>t=e)),F[e]={get:()=>t,set:void 0,enumerable:!0,configurable:!1}}c(u(b(F)),(e=>f(_,e,F[e]))),d(_),C()}c(g(A),(([e,[t]])=>{let r=M[t];if(!r){let e,o=!0,n=[];const a=()=>{if(o)throw new s(`binding ${v(t)} not yet initialized`);return e},c=d((r=>{if(!o)throw new i(`Internal: binding ${v(t)} already initialized`);e=r;const s=n;n=null,o=!1;for(const e of s)e(r);return r}));r={get:a,notify:t=>{t!==c&&(o?p(n,t):t(e))}},M[t]=r,V[t]=c}F[e]={get:r.get,set:void 0,enumerable:!0,configurable:!1},L[e]=r.notify})),c(g(T),(([e,[t,r]])=>{let o=M[t];if(!o){let n,a=!0;const i=[],c=()=>{if(a)throw new s(`binding ${v(e)} not yet initialized`);return n},l=d((e=>{n=e,a=!1;for(const t of i)t(e)})),m=e=>{if(a)throw new s(`binding ${v(t)} not yet initialized`);n=e;for(const t of i)t(e)};o={get:c,notify:e=>{e!==l&&(p(i,e),a||e(n))}},M[t]=o,r&&f(N,t,{get:c,set:m,enumerable:!0,configurable:!1}),R[t]=l}F[e]={get:o.get,set:void 0,enumerable:!0,configurable:!1},L[e]=o.notify})),L["*"]=e=>{e(_)};let G,D=h(x,k,{globalObject:m.globalThis,transforms:I,__moduleShimLexicals__:N}),U=!1;return d({notifiers:L,exportsProxy:O,execute:function(){if(D){const e=D;D=null;try{e(d({imports:d($),onceVar:d(V),liveVar:d(R)}))}catch(e){U=!0,G=e}}if(U)throw G}})}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g;e([["./error/assert.js",[["assert",[e=>o=e]]]],["./module-instance.js",[["makeModuleInstance",[e=>n=e]],["makeThirdPartyModuleInstance",[e=>s=e]]]],["./commons.js",[["Map",[e=>a=e]],["ReferenceError",[e=>i=e]],["TypeError",[e=>c=e]],["entries",[e=>l=e]],["isArray",[e=>p=e]],["isObject",[e=>m=e]],["mapGet",[e=>u=e]],["mapHas",[e=>y=e]],["mapSet",[e=>f=e]],["weakmapGet",[e=>g=e]]]]]);const{quote:d}=o,E=(e,t,r,o)=>{const{name:n,moduleRecords:s}=g(e,r),a=u(s,o);if(void 0===a)throw new i(`Missing link to module ${d(o)} from compartment ${d(n)}`);return b(e,t,a)};r.link(E);const b=(e,t,r)=>{const{compartment:i,moduleSpecifier:b,resolvedImports:P,staticModuleRecord:w}=r,{instances:S}=g(e,i);if(y(S,b))return u(S,b);!function(e,t){o(m(e),`Static module records must be of type object, got ${d(e)}, for module ${d(t)}`);const{imports:r,exports:n,reexports:s=[]}=e;o(p(r),`Property 'imports' of a static module record must be an array, got ${d(r)}, for module ${d(t)}`),o(p(n),`Property 'exports' of a precompiled module record must be an array, got ${d(n)}, for module ${d(t)}`),o(p(s),`Property 'reexports' of a precompiled module record must be an array if present, got ${d(s)}, for module ${d(t)}`)}(w,b);const h=new a;let v;if(function(e){return"string"==typeof e.__syncModuleProgram__}(w))!function(e,t){const{__fixedExportMap__:r,__liveExportMap__:n}=e;o(m(r),`Property '__fixedExportMap__' of a precompiled module record must be an object, got ${d(r)}, for module ${d(t)}`),o(m(n),`Property '__liveExportMap__' of a precompiled module record must be an object, got ${d(n)}, for module ${d(t)}`)}(w,b),v=n(e,t,r,h);else{if(!function(e){return"function"==typeof e.execute}(w))throw new c("importHook must return a static module record, got "+d(w));!function(e,t){const{exports:r}=e;o(p(r),`Property 'exports' of a third-party static module record must be an array, got ${d(r)}, for module ${d(t)}`)}(w,b),v=s(e,w,i,t,b,P)}f(S,b,v);for(const[r,o]of l(P)){const n=E(e,t,i,o);f(h,r,n)}return v};r.instantiate(b)},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w,S,h,v,j,k,A,T,x,I;e([["./commons.js",[["Map",[e=>o=e]],["ReferenceError",[e=>n=e]],["TypeError",[e=>s=e]],["WeakMap",[e=>a=e]],["WeakSet",[e=>i=e]],["arrayFilter",[e=>c=e]],["arrayJoin",[e=>l=e]],["assign",[e=>p=e]],["defineProperties",[e=>m=e]],["entries",[e=>u=e]],["freeze",[e=>y=e]],["getOwnPropertyNames",[e=>f=e]],["promiseThen",[e=>g=e]],["weakmapGet",[e=>d=e]],["weakmapSet",[e=>E=e]],["weaksetHas",[e=>b=e]]]],["./global-object.js",[["setGlobalObjectConstantProperties",[e=>P=e]],["setGlobalObjectMutableProperties",[e=>w=e]],["setGlobalObjectEvaluators",[e=>S=e]]]],["./scope-constants.js",[["isValidIdentifierName",[e=>h=e]]]],["./whitelist.js",[["sharedGlobalPropertyNames",[e=>v=e]]]],["./module-load.js",[["load",[e=>j=e]]]],["./module-link.js",[["link",[e=>k=e]]]],["./module-proxy.js",[["getDeferredExports",[e=>A=e]]]],["./error/assert.js",[["assert",[e=>T=e]]]],["./compartment-evaluate.js",[["compartmentEvaluate",[e=>x=e]]]],["./make-safe-evaluator.js",[["makeSafeEvaluator",[e=>I=e]]]]]);const{quote:O}=T,_=new a,C=new a,F=e=>{const{importHook:t,resolveHook:r}=d(C,e);if("function"!=typeof t||"function"!=typeof r)throw new s("Compartment must be constructed with an importHook and a resolveHook for it to be able to load modules")},N=function(e={},t={},r={}){throw new s("Compartment.prototype.constructor is not a valid constructor.")};r.InertCompartment(N);const V=(e,t)=>{const{execute:r,exportsProxy:o}=k(C,_,e,t);return r(),o},R={constructor:N,get globalThis(){return d(C,this).globalObject},get name(){return d(C,this).name},evaluate(e,t={}){const r=d(C,this);return x(r,e,t)},toString:()=>"[object Compartment]",__isKnownScopeProxy__(e){const{knownScopeProxies:t}=d(C,this);return b(t,e)},module(e){if("string"!=typeof e)throw new s("first argument of module() must be a string");F(this);const{exportsProxy:t}=A(this,d(C,this),_,e);return t},async import(e){if("string"!=typeof e)throw new s("first argument of import() must be a string");return F(this),g(j(C,_,this,e),(()=>({namespace:V(this,e)})))},async load(e){if("string"!=typeof e)throw new s("first argument of load() must be a string");return F(this),j(C,_,this,e)},importNow(e){if("string"!=typeof e)throw new s("first argument of importNow() must be a string");return F(this),V(this,e)}};r.CompartmentPrototype(R),m(N,{prototype:{value:R}}),r.makeCompartmentConstructor(((e,t,r)=>{function a(a={},m={},g={}){if(void 0===new.target)throw new s("Class constructor Compartment cannot be invoked without 'new'");const{name:b="<unknown>",transforms:j=[],__shimTransforms__:k=[],globalLexicals:A={},resolveHook:T,importHook:x,moduleMapHook:F}=g,N=[...j,...k],V=new o,R=new o,M=new o;for(const[e,t]of u(m||{})){if("string"==typeof t)throw new s(`Cannot map module ${O(e)} to ${O(t)} in parent compartment`);if(void 0===d(_,t))throw n(`Cannot map module ${O(e)} because it has no known compartment in this realm`)}const L=c(f(A),(e=>!h(e)));if(L.length)throw new s(`Cannot create compartment with invalid names for global lexicals: ${l(L,", ")}; these names would not be lexically mentionable`);const $=y({...A}),G={};P(G);const D=new i,{safeEvaluate:U}=I({globalObject:G,globalLexicals:$,globalTransforms:N,sloppyGlobalsMode:!1,knownScopeProxies:D});w(G,{intrinsics:t,newGlobalPropertyNames:v,makeCompartmentConstructor:e,markVirtualizedNativeFunction:r}),S(G,U,r),p(G,a),E(C,this,{name:b,globalTransforms:N,globalObject:G,knownScopeProxies:D,globalLexicals:$,safeEvaluate:U,resolveHook:T,importHook:x,moduleMap:m,moduleMapHook:F,moduleRecords:V,__shimTransforms__:k,deferredExports:M,instances:R})}return a.prototype=R,a}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w;e([["./commons.js",[["TypeError",[e=>o=e]],["WeakSet",[e=>n=e]],["arrayFilter",[e=>s=e]],["defineProperty",[e=>a=e]],["entries",[e=>i=e]],["freeze",[e=>c=e]],["getOwnPropertyDescriptor",[e=>l=e]],["getOwnPropertyDescriptors",[e=>p=e]],["globalThis",[e=>m=e]],["is",[e=>u=e]],["isObject",[e=>y=e]],["objectHasOwnProperty",[e=>f=e]],["values",[e=>g=e]],["weaksetHas",[e=>d=e]]]],["./whitelist.js",[["constantProperties",[e=>E=e]],["sharedGlobalPropertyNames",[e=>b=e]],["universalPropertyNames",[e=>P=e]],["whitelist",[e=>w=e]]]]]);const S=e=>"function"==typeof e;function h(e,t,r){if(f(e,t)){const n=l(e,t);if(!u(n.value,r.value)||n.get!==r.get||n.set!==r.set||n.writable!==r.writable||n.enumerable!==r.enumerable||n.configurable!==r.configurable)throw new o("Conflicting definitions of "+t)}a(e,t,r)}function v(e,t){const r={__proto__:null};for(const[o,n]of i(t))f(e,o)&&(r[n]=e[o]);return r}const j=()=>{const e={__proto__:null};let t;const r=t=>{!function(e,t){for(const[r,o]of i(t))h(e,r,o)}(e,p(t))};c(r);const a=()=>{for(const[t,r]of i(e)){if(!y(r))continue;if(!f(r,"prototype"))continue;const n=w[t];if("object"!=typeof n)throw new o("Expected permit object at whitelist."+t);const s=n.prototype;if(!s)throw new o(t+".prototype property not whitelisted");if("string"!=typeof s||!f(w,s))throw new o(`Unrecognized ${t}.prototype whitelist entry`);const a=r.prototype;if(f(e,s)){if(e[s]!==a)throw new o("Conflicting bindings of "+s)}else e[s]=a}};c(a);const l=()=>(c(e),t=new n(s(g(e),S)),e);c(l);const u=e=>{if(!t)throw new o("isPseudoNative can only be called after finalIntrinsics");return d(t,e)};c(u);const b={addIntrinsics:r,completePrototypes:a,finalIntrinsics:l,isPseudoNative:u};return c(b),r(E),r(v(m,P)),b};r.makeIntrinsicsCollector(j),r.getGlobalIntrinsics((e=>{const{addIntrinsics:t,finalIntrinsics:r}=j();return t(v(e,b)),r()}))},({imports:e,liveVar:t,onceVar:r})=>{e([]),r.minEnablements({"%ObjectPrototype%":{toString:!0},"%FunctionPrototype%":{toString:!0},"%ErrorPrototype%":{name:!0}});const o={"%ObjectPrototype%":{toString:!0,valueOf:!0},"%ArrayPrototype%":{toString:!0,push:!0},"%FunctionPrototype%":{constructor:!0,bind:!0,toString:!0},"%ErrorPrototype%":{constructor:!0,message:!0,name:!0,toString:!0},"%TypeErrorPrototype%":{constructor:!0,message:!0,name:!0},"%SyntaxErrorPrototype%":{message:!0,name:!0},"%RangeErrorPrototype%":{message:!0,name:!0},"%URIErrorPrototype%":{message:!0,name:!0},"%EvalErrorPrototype%":{message:!0,name:!0},"%ReferenceErrorPrototype%":{message:!0,name:!0},"%PromisePrototype%":{constructor:!0},"%TypedArrayPrototype%":"*","%Generator%":{constructor:!0,name:!0,toString:!0},"%IteratorPrototype%":{toString:!0}};r.moderateEnablements(o);const n={...o,"%ObjectPrototype%":"*","%TypedArrayPrototype%":"*"};r.severeEnablements(n)},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E;e([["./commons.js",[["Set",[e=>o=e]],["String",[e=>n=e]],["TypeError",[e=>s=e]],["arrayForEach",[e=>a=e]],["defineProperty",[e=>i=e]],["getOwnPropertyDescriptor",[e=>c=e]],["getOwnPropertyDescriptors",[e=>l=e]],["getOwnPropertyNames",[e=>p=e]],["isObject",[e=>m=e]],["objectHasOwnProperty",[e=>u=e]],["ownKeys",[e=>y=e]],["setHas",[e=>f=e]]]],["./enablements.js",[["minEnablements",[e=>g=e]],["moderateEnablements",[e=>d=e]],["severeEnablements",[e=>E=e]]]]]),r.default((function(e,t,r=[]){const b=new o(r);function P(e,t,r,o){if("value"in o&&o.configurable){const{value:a}=o;function c(){return a}i(c,"originalValue",{value:a,writable:!1,enumerable:!1,configurable:!1});const l=f(b,r);i(t,r,{get:c,set:function(o){if(t===this)throw new s(`Cannot assign to read only property '${n(r)}' of '${e}'`);u(this,r)?this[r]=o:(l&&console.error(new s("Override property "+r)),i(this,r,{value:o,writable:!0,enumerable:!0,configurable:!0}))},enumerable:o.enumerable,configurable:o.configurable})}}function w(e,t,r){const o=c(t,r);o&&P(e,t,r,o)}function S(e,t){const r=l(t);r&&a(y(r),(o=>P(e,t,o,r[o])))}let h;switch(t){case"min":h=g;break;case"moderate":h=d;break;case"severe":h=E;break;default:throw new s("unrecognized overrideTaming "+t)}!function e(t,r,o){for(const a of p(o)){const i=c(r,a);if(!i||i.get||i.set)continue;const l=`${t}.${n(a)}`,p=o[a];if(!0===p)w(l,r,a);else if("*"===p)S(l,i.value);else{if(!m(p))throw new s("Unexpected override enablement plan "+l);e(l,i.value,p)}}}("root",e,h)}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a;e([["./commons.js",[["arrayPush",[e=>o=e]],["arraySlice",[e=>n=e]],["freeze",[e=>s=e]]]],["./error/assert.js",[["assert",[e=>a=e]]]]]);const{details:i,quote:c}=a,l=e=>{const t=[],r=(r,n)=>{a.typeof(r,"string",i`Environment option name ${c(r)} must be a string.`),a.typeof(n,"string",i`Environment option default setting ${c(n)} must be a string.`);let s=n;const l=e.process;if(l&&"object"==typeof l){const e=l.env;if(e&&"object"==typeof e&&r in e){o(t,r);const n=e[r];a.typeof(n,"string",i`Environment option named ${c(r)}, if present, must have a corresponding string value, got ${c(n)}`),s=n}}return a(void 0===s||"string"==typeof s,i`Environment option value ${c(s)}, if present, must be a string.`),s};s(r);const l=()=>s(n(t));return s(l),{getEnvironmentOption:r,getCapturedEnvironmentOptionNames:l}};r.makeEnvironmentCaptor(l),s(l)},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y;e([["../commons.js",[["WeakSet",[e=>o=e]],["arrayFilter",[e=>n=e]],["arrayMap",[e=>s=e]],["arrayPush",[e=>a=e]],["defineProperty",[e=>i=e]],["freeze",[e=>c=e]],["fromEntries",[e=>l=e]],["isError",[e=>p=e]],["stringEndsWith",[e=>m=e]],["weaksetAdd",[e=>u=e]],["weaksetHas",[e=>y=e]]]],["./types.js",[]],["./internal-types.js",[]]]);const f=c([["debug","debug"],["log","log"],["info","info"],["warn","warn"],["error","error"],["trace","log"],["dirxml","log"],["group","log"],["groupCollapsed","log"]]),g=c([["assert","error"],["timeLog","log"],["clear",void 0],["count","info"],["countReset",void 0],["dir","log"],["groupEnd","log"],["table","log"],["time","info"],["timeEnd","info"],["profile",void 0],["profileEnd",void 0],["timeStamp",void 0]]),d=c([...f,...g]);r.consoleWhitelist(d);const E=(e,{shouldResetForDebugging:t=!1}={})=>{t&&e.resetErrorTagNum();let r=[];const o=l(s(d,(([e,t])=>{const o=(...t)=>{a(r,[e,...t])};return i(o,"name",{value:e}),[e,c(o)]})));c(o);const n=()=>{const e=c(r);return r=[],e};return c(n),c({loggingConsole:o,takeLog:n})};r.makeLoggingConsoleKit(E),c(E);const b={NOTE:"ERROR_NOTE:",MESSAGE:"ERROR_MESSAGE:"};c(b),r.BASE_CONSOLE_LEVEL("debug");const P=(e,t)=>{const{getStackString:r,tagError:d,takeMessageLogArgs:E,takeNoteLogArgsArray:P}=t,w=(e,t)=>s(e,(e=>p(e)?(a(t,e),`(${d(e)})`):e)),S=(t,r,o,n)=>{const s=d(t),a=r===b.MESSAGE?s+":":`${s} ${r}`,i=w(o,n);e.debug(a,...i)},h=(t,r)=>{if(0===t.length)return;if(1===t.length&&void 0===r)return void k(t[0]);let o;o=1===t.length?"Nested error":`Nested ${t.length} errors`,void 0!==r&&(o=`${o} under ${r}`),e.group(o);try{for(const e of t)k(e)}finally{e.groupEnd()}},v=new o,j=(e,t)=>{const r=[];S(e,b.NOTE,t,r),h(r,d(e))},k=t=>{if(y(v,t))return;const o=d(t);u(v,t);const n=[],s=E(t),a=P(t,j);void 0===s?e.debug(o+":",t.message):S(t,b.MESSAGE,s,n);let i=r(t);"string"==typeof i&&i.length>=1&&!m(i,"\n")&&(i+="\n"),e.debug(i);for(const e of a)S(t,b.NOTE,e,n);h(n,o)},A=s(f,(([t,r])=>{const o=(...r)=>{const o=[],n=w(r,o);e[t](...n),h(o)};return i(o,"name",{value:t}),[t,c(o)]})),T=n(g,(([t,r])=>t in e)),x=s(T,(([t,r])=>{const o=(...r)=>{e[t](...r)};return i(o,"name",{value:t}),[t,c(o)]})),I=l([...A,...x]);return c(I)};r.makeCausalConsole(P),c(P);const w=(e,t,r)=>{const o=n(d,(([t,r])=>t in e)),a=s(o,(([r,o])=>[r,c(((...n)=>{(void 0===o||t.canLog(o))&&e[r](...n)}))])),i=l(a);return c(i)};r.filterConsole(w),c(w)},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a;e([["../commons.js",[["TypeError",[e=>o=e]],["globalThis",[e=>n=e]]]],["./assert.js",[["loggedErrorHandler",[e=>s=e]]]],["./console.js",[["makeCausalConsole",[e=>a=e]]]],["./types.js",[]],["./internal-types.js",[]]]);const i=console;r.tameConsole(((e="safe",t="platform",r)=>{if("safe"!==e&&"unsafe"!==e)throw new o("unrecognized consoleTaming "+e);if("unsafe"===e)return{console:i};let c;c=void 0===r?s:{...s,getStackString:r};const l=a(i,c);return"none"!==t&&void 0!==n.process&&n.process.on("uncaughtException",(e=>{l.error(e),"platform"===t||"exit"===t?n.process.exit(n.process.exitCode||-1):"abort"===t&&n.process.abort()})),"none"!==t&&void 0!==n.window&&void 0!==n.window.addEventListener&&n.window.addEventListener("error",(e=>{e.preventDefault(),l.error(e.error),"exit"!==t&&"abort"!==t||(n.window.location.href="about:blank")})),{console:l}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w;e([["../commons.js",[["WeakMap",[e=>o=e]],["WeakSet",[e=>n=e]],["apply",[e=>s=e]],["arrayFilter",[e=>a=e]],["arrayJoin",[e=>i=e]],["arrayMap",[e=>c=e]],["arraySlice",[e=>l=e]],["create",[e=>p=e]],["defineProperties",[e=>m=e]],["fromEntries",[e=>u=e]],["reflectSet",[e=>y=e]],["regexpExec",[e=>f=e]],["regexpTest",[e=>g=e]],["weakmapGet",[e=>d=e]],["weakmapHas",[e=>E=e]],["weakmapSet",[e=>b=e]],["weaksetAdd",[e=>P=e]],["weaksetHas",[e=>w=e]]]]]);const S=["getTypeName","getFunctionName","getMethodName","getFileName","getLineNumber","getColumnNumber","getEvalOrigin","isToplevel","isEval","isNative","isConstructor","isAsync","getPosition","getScriptNameOrSourceURL","toString"],h=e=>{const t=u(c(S,(t=>{const r=e[t];return[t,()=>s(r,e,[])]})));return p(t,{})},v=[/\/node_modules\//,/^(?:node:)?internal\//,/\/packages\/ses\/src\/error\/assert.js$/,/\/packages\/eventual-send\/src\//],j=e=>{if(!e)return!0;for(const t of v)if(g(t,e))return!1;return!0};r.filterFileName(j);const k=[/^((?:.*[( ])?)[:/\w_-]*\/\.\.\.\/(.+)$/,/^((?:.*[( ])?)[:/\w_-]*\/(packages\/.+)$/],A=e=>{for(const t of k){const r=f(t,e);if(r)return i(l(r,1),"")}return e};r.shortenCallSiteString(A),r.tameV8ErrorConstructor(((e,t,r,l)=>{const p=e.captureStackTrace,u=e=>"verbose"===l||j(e.getFileName()),f=e=>{let t=""+e;return"concise"===l&&(t=A(t)),"\n  at "+t},g=(e,t)=>i(c(a(t,u),f),""),S=new o,v={captureStackTrace(t,r=v.captureStackTrace){"function"!=typeof p?y(t,"stack",""):s(p,e,[t,r])},getStackString(e){E(S,e)||e.stack;const t=d(S,e);return t?g(0,t):""},prepareStackTrace:(e,t)=>(b(S,e,t),"unsafe"===r?`${e}${g(0,t)}`:"")},k=v.prepareStackTrace;e.prepareStackTrace=k;const T=new n([k]);return m(t,{captureStackTrace:{value:v.captureStackTrace,writable:!0,enumerable:!1,configurable:!0},prepareStackTrace:{get:()=>e.prepareStackTrace,set(t){if("function"==typeof t){const r=(e=>{if(w(T,e))return e;const t={prepareStackTrace:(t,r)=>(b(S,t,r),e(t,(e=>c(e,h))(r)))};return P(T,t.prepareStackTrace),t.prepareStackTrace})(t);e.prepareStackTrace=r}else e.prepareStackTrace=k},enumerable:!1,configurable:!0}}),v.getStackString}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m;e([["../commons.js",[["FERAL_ERROR",[e=>o=e]],["TypeError",[e=>n=e]],["apply",[e=>s=e]],["construct",[e=>a=e]],["defineProperties",[e=>i=e]],["setPrototypeOf",[e=>c=e]],["getOwnPropertyDescriptor",[e=>l=e]]]],["../whitelist.js",[["NativeErrors",[e=>p=e]]]],["./tame-v8-error-constructor.js",[["tameV8ErrorConstructor",[e=>m=e]]]]]);const u=l(o.prototype,"stack"),y=u&&u.get,f=e=>"function"==typeof y?s(y,e,[]):"stack"in e?""+e.stack:"";r.default((function(e="safe",t="concise"){if("safe"!==e&&"unsafe"!==e)throw new n("unrecognized errorTaming "+e);if("concise"!==t&&"verbose"!==t)throw new n("unrecognized stackFiltering "+t);const r=o.prototype,l="function"==typeof o.captureStackTrace?"v8":"unknown",{captureStackTrace:u}=o,y=(e={})=>{const t=function(...e){let r;return r=void 0===new.target?s(o,this,e):a(o,e,new.target),"v8"===l&&s(u,o,[r,t]),r};return i(t,{length:{value:1},prototype:{value:r,writable:!1,enumerable:!1,configurable:!1}}),t},g=y({powers:"original"}),d=y({powers:"none"});i(r,{constructor:{value:d}});for(const e of p)c(e,d);i(g,{stackTraceLimit:{get(){if("number"==typeof o.stackTraceLimit)return o.stackTraceLimit},set(e){"number"==typeof e&&("number"!=typeof o.stackTraceLimit||(o.stackTraceLimit=e))},enumerable:!1,configurable:!0}}),i(d,{stackTraceLimit:{get(){},set(e){},enumerable:!1,configurable:!0}});let E=f;return"v8"===l&&(E=m(o,g,e,t)),{"%InitialGetStackString%":E,"%InitialError%":g,"%SharedError%":d}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E;function b(e){return l(e).constructor}e([["./commons.js",[["FERAL_FUNCTION",[e=>o=e]],["Float32Array",[e=>n=e]],["Map",[e=>s=e]],["Set",[e=>a=e]],["String",[e=>i=e]],["getOwnPropertyDescriptor",[e=>c=e]],["getPrototypeOf",[e=>l=e]],["iterateArray",[e=>p=e]],["iterateMap",[e=>m=e]],["iterateSet",[e=>u=e]],["iterateString",[e=>y=e]],["matchAllRegExp",[e=>f=e]],["matchAllSymbol",[e=>g=e]],["regexpPrototype",[e=>d=e]]]],["./compartment-shim.js",[["InertCompartment",[e=>E=e]]]]]),r.getAnonymousIntrinsics((()=>{const e=o.prototype.constructor,t=c(function(){return arguments}(),"callee").get,r=y(new i),P=l(r),w=d[g]&&f(/./),S=w&&l(w),h=p([]),v=l(h),j=l(n),k=m(new s),A=l(k),T=u(new a),x=l(T),I=l(v),O=b((function*(){})),_=O.prototype,C=b((async function*(){})),F=C.prototype,N=F.prototype,V=l(N);return{"%InertFunction%":e,"%ArrayIteratorPrototype%":v,"%InertAsyncFunction%":b((async function(){})),"%AsyncGenerator%":F,"%InertAsyncGeneratorFunction%":C,"%AsyncGeneratorPrototype%":N,"%AsyncIteratorPrototype%":V,"%Generator%":_,"%InertGeneratorFunction%":O,"%IteratorPrototype%":I,"%MapIteratorPrototype%":A,"%RegExpStringIteratorPrototype%":S,"%SetIteratorPrototype%":x,"%StringIteratorPrototype%":P,"%ThrowTypeError%":t,"%TypedArray%":j,"%InertCompartment%":E}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w,S,h,v,j,k,A,T,x,I;e([["./commons.js",[["Set",[e=>o=e]],["String",[e=>n=e]],["TypeError",[e=>s=e]],["WeakMap",[e=>a=e]],["WeakSet",[e=>i=e]],["apply",[e=>c=e]],["arrayForEach",[e=>l=e]],["defineProperty",[e=>p=e]],["freeze",[e=>m=e]],["getOwnPropertyDescriptor",[e=>u=e]],["getOwnPropertyDescriptors",[e=>y=e]],["getPrototypeOf",[e=>f=e]],["isInteger",[e=>g=e]],["isObject",[e=>d=e]],["objectHasOwnProperty",[e=>E=e]],["ownKeys",[e=>b=e]],["preventExtensions",[e=>P=e]],["setAdd",[e=>w=e]],["setForEach",[e=>S=e]],["setHas",[e=>h=e]],["toStringTagSymbol",[e=>v=e]],["typedArrayPrototype",[e=>j=e]],["weakmapGet",[e=>k=e]],["weakmapSet",[e=>A=e]],["weaksetAdd",[e=>T=e]],["weaksetHas",[e=>x=e]]]],["./error/assert.js",[["assert",[e=>I=e]]]]]);const O=u(j,v);I(O);const _=O.get;I(_);const C=e=>void 0!==c(_,e,[]);r.isTypedArray(C),r.makeHardener((()=>{const e=new i,{harden:t}={harden(t){const r=new o,i=new a;function c(t,o){if(!d(t))return;const n=typeof t;if("object"!==n&&"function"!==n)throw new s("Unexpected typeof: "+n);x(e,t)||h(r,t)||(w(r,t),A(i,t,o))}return c(t),S(r,(function(e){C(e)?(e=>{const t=y(e);P(e),l(b(t),(r=>{const o=t[r],s=+n(r);g(s)||p(e,r,{...o,writable:!1,configurable:!1})}))})(e):m(e);const t=k(i,e)||"unknown",r=y(e);c(f(e),t+".__proto__"),l(b(r),(e=>{const o=`${t}.${n(e)}`,s=r[e];E(s,"value")?c(s.value,""+o):(c(s.get,o+"(get)"),c(s.set,o+"(set)"))}))})),S(r,(function(t){T(e,t)})),t}};return t}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i;e([["./commons.js",[["Date",[e=>o=e]],["TypeError",[e=>n=e]],["apply",[e=>s=e]],["construct",[e=>a=e]],["defineProperties",[e=>i=e]]]]]),r.default((function(e="safe"){if("safe"!==e&&"unsafe"!==e)throw new n("unrecognized dateTaming "+e);const t=o,r=t.prototype,c=({powers:e="none"}={})=>{let n;return n="original"===e?function(...e){return void 0===new.target?s(t,void 0,e):a(t,e,new.target)}:function(...e){return void 0===new.target?"Invalid Date":(0===e.length&&(e=[NaN]),a(t,e,new.target))},i(n,{length:{value:7},prototype:{value:r,writable:!1,enumerable:!1,configurable:!1},parse:{value:o.parse,writable:!0,enumerable:!1,configurable:!0},UTC:{value:o.UTC,writable:!0,enumerable:!1,configurable:!0}}),n},l=c({powers:"original"}),p=c({powers:"none"});return i(l,{now:{value:o.now,writable:!0,enumerable:!1,configurable:!0}}),i(p,{now:{value:()=>NaN,writable:!0,enumerable:!1,configurable:!0}}),i(r,{constructor:{value:p}}),{"%InitialDate%":l,"%SharedDate%":p}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a;function i(e="safe"){if("safe"!==e&&"unsafe"!==e)throw new o("unrecognized domainTaming "+e);if("unsafe"!==e&&"object"==typeof n.process&&null!==n.process){const e=s(n.process,"domain");if(void 0!==e&&void 0!==e.get)throw new o("SES failed to lockdown, Node.js domains have been initialized (SES_NO_DOMAINS)");a(n.process,"domain",{value:null,configurable:!1,writable:!1,enumerable:!1})}}e([["./commons.js",[["TypeError",[e=>o=e]],["globalThis",[e=>n=e]],["getOwnPropertyDescriptor",[e=>s=e]],["defineProperty",[e=>a=e]]]]]),Object.defineProperty(i,"name",{value:"tameDomains"}),r.tameDomains(i)},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c;e([["./commons.js",[["FERAL_FUNCTION",[e=>o=e]],["SyntaxError",[e=>n=e]],["TypeError",[e=>s=e]],["defineProperties",[e=>a=e]],["getPrototypeOf",[e=>i=e]],["setPrototypeOf",[e=>c=e]]]]]),r.default((function(){try{o.prototype.constructor("return 1")}catch(e){return{}}const e={};function t(t,r,l){let p;try{p=(0,eval)(l)}catch(e){if(e instanceof n)return;throw e}const m=i(p),u=function(){throw new s("Function.prototype.constructor is not a valid constructor.")};a(u,{prototype:{value:m},name:{value:t,writable:!1,enumerable:!1,configurable:!0}}),a(m,{constructor:{value:u}}),u!==o.prototype.constructor&&c(u,o.prototype.constructor),e[r]=u}return t("Function","%InertFunction%","(function(){})"),t("GeneratorFunction","%InertGeneratorFunction%","(function*(){})"),t("AsyncFunction","%InertAsyncFunction%","(async function(){})"),t("AsyncGeneratorFunction","%InertAsyncGeneratorFunction%","(async function*(){})"),e}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m;e([["./commons.js",[["WeakSet",[e=>o=e]],["defineProperty",[e=>n=e]],["freeze",[e=>s=e]],["functionPrototype",[e=>a=e]],["functionToString",[e=>i=e]],["stringEndsWith",[e=>c=e]],["weaksetAdd",[e=>l=e]],["weaksetHas",[e=>p=e]]]]]),r.tameFunctionToString((()=>{if(void 0===m){const e=new o;n(a,"toString",{value:{toString(){const t=i(this,[]);return c(t,") { [native code] }")||!p(e,this)?t:`function ${this.name}() { [native code] }`}}.toString}),m=s((t=>l(e,t)))}return m}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p;e([["./commons.js",[["Number",[e=>o=e]],["String",[e=>n=e]],["TypeError",[e=>s=e]],["defineProperty",[e=>a=e]],["getOwnPropertyNames",[e=>i=e]],["isObject",[e=>c=e]],["regexpExec",[e=>l=e]]]],["./error/assert.js",[["assert",[e=>p=e]]]]]);const{details:m,quote:u}=p,y=/^(\w*[a-z])Locale([A-Z]\w*)$/,f={localeCompare(e){if(null==this)throw new s('Cannot localeCompare with null or undefined "this" value');const t=""+this;return t<(e=""+e)?-1:t>e?1:(p(t===e,m`expected ${u(t)} and ${u(e)} to compare`),0)},toString(){return""+this}},g=f.localeCompare,d=f.toString;r.default((function(e,t="safe"){if("safe"!==t&&"unsafe"!==t)throw new s("unrecognized localeTaming "+t);if("unsafe"!==t){a(n.prototype,"localeCompare",{value:g});for(const t of i(e)){const r=e[t];if(c(r))for(const e of i(r)){const t=l(y,e);if(t){p("function"==typeof r[e],m`expected ${u(e)} to be a function`);const o=`${t[1]}${t[2]}`,n=r[o];p("function"==typeof n,m`function ${u(o)} not found`),a(r,e,{value:n})}}}a(o.prototype,"toLocaleString",{value:d})}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i;e([["./commons.js",[["Math",[e=>o=e]],["TypeError",[e=>n=e]],["create",[e=>s=e]],["getOwnPropertyDescriptors",[e=>a=e]],["objectPrototype",[e=>i=e]]]]]),r.default((function(e="safe"){if("safe"!==e&&"unsafe"!==e)throw new n("unrecognized mathTaming "+e);const t=o,r=t,{random:c,...l}=a(t);return{"%InitialMath%":r,"%SharedMath%":s(i,l)}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c;e([["./commons.js",[["FERAL_REG_EXP",[e=>o=e]],["TypeError",[e=>n=e]],["construct",[e=>s=e]],["defineProperties",[e=>a=e]],["getOwnPropertyDescriptor",[e=>i=e]],["speciesSymbol",[e=>c=e]]]]]),r.default((function(e="safe"){if("safe"!==e&&"unsafe"!==e)throw new n("unrecognized regExpTaming "+e);const t=o.prototype,r=(e={})=>{const r=function(...e){return void 0===new.target?o(...e):s(o,e,new.target)};return a(r,{length:{value:2},prototype:{value:t,writable:!1,enumerable:!1,configurable:!1},[c]:i(o,c)}),r},l=r(),p=r();return"unsafe"!==e&&delete t.compile,a(t,{constructor:{value:p}}),{"%InitialRegExp%":l,"%SharedRegExp%":p}}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P;e([["./whitelist.js",[["whitelist",[e=>o=e]],["FunctionInstance",[e=>n=e]],["isAccessorPermit",[e=>s=e]]]],["./commons.js",[["Map",[e=>a=e]],["String",[e=>i=e]],["TypeError",[e=>c=e]],["arrayFilter",[e=>l=e]],["arrayIncludes",[e=>p=e]],["arrayMap",[e=>m=e]],["entries",[e=>u=e]],["getOwnPropertyDescriptor",[e=>y=e]],["getPrototypeOf",[e=>f=e]],["isObject",[e=>g=e]],["mapGet",[e=>d=e]],["objectHasOwnProperty",[e=>E=e]],["ownKeys",[e=>b=e]],["symbolKeyFor",[e=>P=e]]]]]),r.default((function(e,t){const r=["undefined","boolean","number","string","symbol"],w=new a(e.Symbol?m(l(u(o.Symbol),(([t,r])=>"symbol"===r&&"symbol"==typeof e.Symbol[t])),(([t])=>[e.Symbol[t],"@@"+t])):[]);function S(e,t){if("string"==typeof t)return t;const r=d(w,t);if("symbol"==typeof t){if(r)return r;{const e=P(t);return void 0!==e?`RegisteredSymbol(${e})`:"Unique"+i(t)}}throw new c(`Unexpected property name type ${e} ${t}`)}function h(t,o,n,s){if("object"==typeof s)return k(t,o,s),!0;if(!1===s)return!1;if("string"==typeof s)if("prototype"===n||"constructor"===n){if(E(e,s)){if(o!==e[s])throw new c("Does not match whitelist "+t);return!0}}else if(p(r,s)){if(typeof o!==s)throw new c(`At ${t} expected ${s} not ${typeof o}`);return!0}throw new c(`Unexpected whitelist permit ${s} at ${t}`)}function v(e,t,r,o){const n=y(t,r);if(E(n,"value")){if(s(o))throw new c("Accessor expected at "+e);return h(e,n.value,r,o)}if(!s(o))throw new c("Accessor not expected at "+e);return h(e+"<get>",n.get,r,o.get)&&h(e+"<set>",n.set,r,o.set)}function j(e,r,o){const s="__proto__"===o?"--proto--":o;return E(r,s)?r[s]:"function"==typeof e&&(t(e),E(n,s))?n[s]:void 0}function k(t,r,o){if(void 0!==r){!function(t,r,o){if(!g(r))throw new c(`Object expected: ${t}, ${r}, ${o}`);const n=f(r);if(null!==n||null!==o){if(void 0!==o&&"string"!=typeof o)throw new c(`Malformed whitelist permit ${t}.__proto__`);if(n!==e[o||"%ObjectPrototype%"])throw new c(`Unexpected intrinsic ${t}.__proto__ at ${o}`)}}(t,r,o["[[Proto]]"]);for(const e of b(r)){const n=S(t,e),s=`${t}.${n}`,a=j(r,o,n);if(!a||!v(s,r,e,a)){!1!==a&&console.warn("Removing "+s);try{delete r[e]}catch(t){throw e in r?console.error("failed to delete "+s,t):console.error(`deleting ${s} threw`,t),t}}}}}k("intrinsics",e,o)}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p,m,u,y,f,g,d,E,b,P,w,S,h,v,j,k,A,T,x,I,O,_,C,F,N,V,R;e([["./commons.js",[["FERAL_FUNCTION",[e=>o=e]],["FERAL_EVAL",[e=>n=e]],["TypeError",[e=>s=e]],["arrayFilter",[e=>a=e]],["arrayMap",[e=>i=e]],["globalThis",[e=>c=e]],["is",[e=>l=e]],["ownKeys",[e=>p=e]],["stringSplit",[e=>m=e]],["noEvalEvaluate",[e=>u=e]]]],["./error/stringify-utils.js",[["enJoin",[e=>y=e]]]],["./make-hardener.js",[["makeHardener",[e=>f=e]]]],["./intrinsics.js",[["makeIntrinsicsCollector",[e=>g=e]]]],["./whitelist-intrinsics.js",[["default",[e=>d=e]]]],["./tame-function-constructors.js",[["default",[e=>E=e]]]],["./tame-date-constructor.js",[["default",[e=>b=e]]]],["./tame-math-object.js",[["default",[e=>P=e]]]],["./tame-regexp-constructor.js",[["default",[e=>w=e]]]],["./enable-property-overrides.js",[["default",[e=>S=e]]]],["./tame-locale-methods.js",[["default",[e=>h=e]]]],["./global-object.js",[["setGlobalObjectConstantProperties",[e=>v=e]],["setGlobalObjectMutableProperties",[e=>j=e]],["setGlobalObjectEvaluators",[e=>k=e]]]],["./make-safe-evaluator.js",[["makeSafeEvaluator",[e=>A=e]]]],["./whitelist.js",[["initialGlobalPropertyNames",[e=>T=e]]]],["./tame-function-tostring.js",[["tameFunctionToString",[e=>x=e]]]],["./tame-domains.js",[["tameDomains",[e=>I=e]]]],["./error/tame-console.js",[["tameConsole",[e=>O=e]]]],["./error/tame-error-constructor.js",[["default",[e=>_=e]]]],["./error/assert.js",[["assert",[e=>C=e]],["makeAssert",[e=>F=e]]]],["./environment-options.js",[["makeEnvironmentCaptor",[e=>N=e]]]],["./get-anonymous-intrinsics.js",[["getAnonymousIntrinsics",[e=>V=e]]]],["./compartment-shim.js",[["makeCompartmentConstructor",[e=>R=e]]]]]);const{details:M,quote:L}=C;let $;const G=f(),D=(e={})=>{const{getEnvironmentOption:t,getCapturedEnvironmentOptionNames:r}=N(c),{errorTaming:f=t("LOCKDOWN_ERROR_TAMING","safe"),errorTrapping:D=t("LOCKDOWN_ERROR_TRAPPING","platform"),regExpTaming:U=t("LOCKDOWN_REGEXP_TAMING","safe"),localeTaming:H=t("LOCKDOWN_LOCALE_TAMING","safe"),consoleTaming:W=t("LOCKDOWN_CONSOLE_TAMING","safe"),overrideTaming:B=t("LOCKDOWN_OVERRIDE_TAMING","moderate"),stackFiltering:z=t("LOCKDOWN_STACK_FILTERING","concise"),domainTaming:K=t("LOCKDOWN_DOMAIN_TAMING","safe"),evalTaming:J=t("LOCKDOWN_EVAL_TAMING","safeEval"),overrideDebug:q=a(m(t("LOCKDOWN_OVERRIDE_DEBUG",""),","),(e=>""!==e)),__allowUnsafeMonkeyPatching__:Y=t("__LOCKDOWN_ALLOW_UNSAFE_MONKEY_PATCHING__","safe"),dateTaming:X="safe",mathTaming:Z="safe",...Q}=e,ee=r();ee.length>0&&console.warn("SES Lockdown using options from environment variables "+y(i(ee,L),"and")),C("unsafeEval"===J||"safeEval"===J||"noEval"===J,M`lockdown(): non supported option evalTaming: ${L(J)}`);const te=p(Q);if(C(0===te.length,M`lockdown(): non supported option ${L(te)}`),C(void 0===$,`Already locked down at ${$} (SES_ALREADY_LOCKED_DOWN)`,s),$=new s("Prior lockdown (SES_ALREADY_LOCKED_DOWN)"),$.stack,(()=>{let e=!1;try{e=o("eval","SES_changed",'        eval("SES_changed = true");\n        return SES_changed;\n      ')(n,!1),e||delete c.SES_changed}catch(t){e=!0}if(!e)throw new s("SES cannot initialize unless 'eval' is the original intrinsic 'eval', suitable for direct-eval (dynamically scoped eval) (SES_DIRECT_EVAL)")})(),c.Function.prototype.constructor!==c.Function&&"function"==typeof c.harden&&"function"==typeof c.lockdown&&c.Date.prototype.constructor!==c.Date&&"function"==typeof c.Date.now&&l(c.Date.prototype.constructor.now(),NaN))throw new s("Already locked down but not by this SES instance (SES_MULTIPLE_INSTANCES)");I(K);const{addIntrinsics:re,completePrototypes:oe,finalIntrinsics:ne}=g();re({harden:G}),re(E()),re(b(X)),re(_(f,z)),re(P(Z)),re(w(U)),re(V()),oe();const se=ne();let ae;"unsafe"!==f&&(ae=se["%InitialGetStackString%"]);const ie=O(W,D,ae);c.console=ie.console,"unsafe"===f&&c.assert===C&&(c.assert=F(void 0,!0)),h(se,H);const ce=x();if(d(se,ce),v(c),j(c,{intrinsics:se,newGlobalPropertyNames:T,makeCompartmentConstructor:R,markVirtualizedNativeFunction:ce}),"noEval"===J)k(c,u,ce);else if("safeEval"===J){const{safeEvaluate:e}=A({globalObject:c});k(c,e,ce)}return function(){return S(se,B,q),"unsafe"!==Y&&G(se),c.harden=G,!0}};r.repairIntrinsics(D),r.lockdown(((e={})=>{D(e)()}))},({imports:e,liveVar:t,onceVar:r})=>{let o,n,s,a,i,c,l,p;if(e([["./src/commons.js",[["globalThis",[e=>o=e]],["TypeError",[e=>n=e]],["assign",[e=>s=e]]]],["./src/tame-function-tostring.js",[["tameFunctionToString",[e=>a=e]]]],["./src/intrinsics.js",[["getGlobalIntrinsics",[e=>i=e]]]],["./src/lockdown-shim.js",[["lockdown",[e=>c=e]]]],["./src/compartment-shim.js",[["makeCompartmentConstructor",[e=>l=e]]]],["./src/error/assert.js",[["assert",[e=>p=e]]]]]),function(){return this}())throw new n("SES failed to initialize, sloppy mode (SES_NO_SLOPPY)");const m=a(),u=l(l,i(o),m);s(o,{lockdown:c,Compartment:u,assert:p})}];function t(e,t){const r=[];return{get:function(){return t},set:function(e){t=e;for(const e of r)e(t)},observe:function(e){r.push(e),e(t)},enumerable:!0}}const r=[{globalThis:t(),Array:t(),Date:t(),Float32Array:t(),JSON:t(),Map:t(),Math:t(),Number:t(),Object:t(),Promise:t(),Proxy:t(),Reflect:t(),FERAL_REG_EXP:t(),Set:t(),String:t(),WeakMap:t(),WeakSet:t(),FERAL_ERROR:t(),RangeError:t(),ReferenceError:t(),SyntaxError:t(),TypeError:t(),assign:t(),create:t(),defineProperties:t(),entries:t(),freeze:t(),getOwnPropertyDescriptor:t(),getOwnPropertyDescriptors:t(),getOwnPropertyNames:t(),getPrototypeOf:t(),is:t(),isExtensible:t(),keys:t(),objectPrototype:t(),seal:t(),preventExtensions:t(),setPrototypeOf:t(),values:t(),speciesSymbol:t(),toStringTagSymbol:t(),iteratorSymbol:t(),matchAllSymbol:t(),symbolKeyFor:t(),symbolFor:t(),isInteger:t(),stringifyJson:t(),fromEntries:t(),defineProperty:t(),apply:t(),construct:t(),reflectGet:t(),reflectGetOwnPropertyDescriptor:t(),reflectHas:t(),reflectIsExtensible:t(),ownKeys:t(),reflectPreventExtensions:t(),reflectSet:t(),isArray:t(),arrayPrototype:t(),mapPrototype:t(),proxyRevocable:t(),regexpPrototype:t(),setPrototype:t(),stringPrototype:t(),weakmapPrototype:t(),weaksetPrototype:t(),functionPrototype:t(),promisePrototype:t(),typedArrayPrototype:t(),uncurryThis:t(),objectHasOwnProperty:t(),arrayFilter:t(),arrayForEach:t(),arrayIncludes:t(),arrayJoin:t(),arrayMap:t(),arrayPop:t(),arrayPush:t(),arraySlice:t(),arraySome:t(),arraySort:t(),iterateArray:t(),mapSet:t(),mapGet:t(),mapHas:t(),iterateMap:t(),setAdd:t(),setDelete:t(),setForEach:t(),setHas:t(),iterateSet:t(),regexpTest:t(),regexpExec:t(),matchAllRegExp:t(),stringEndsWith:t(),stringIncludes:t(),stringIndexOf:t(),stringMatch:t(),stringReplace:t(),stringSearch:t(),stringSlice:t(),stringSplit:t(),stringStartsWith:t(),iterateString:t(),weakmapDelete:t(),weakmapGet:t(),weakmapHas:t(),weakmapSet:t(),weaksetAdd:t(),weaksetGet:t(),weaksetHas:t(),functionToString:t(),promiseAll:t(),promiseCatch:t(),promiseThen:t(),getConstructorOf:t(),immutableObject:t(),isObject:t(),isError:t(),FERAL_EVAL:t(),FERAL_FUNCTION:t(),noEvalEvaluate:t()},{},{an:t(),bestEffortStringify:t(),enJoin:t()},{},{unredactedDetails:t(),loggedErrorHandler:t(),makeAssert:t(),assert:t()},{makeEvaluateFactory:t()},{isValidIdentifierName:t(),getScopeConstants:t()},{createScopeHandler:t()},{getSourceURL:t()},{rejectHtmlComments:t(),evadeHtmlCommentTest:t(),rejectImportExpressions:t(),evadeImportExpressionTest:t(),rejectSomeDirectEvalExpressions:t(),mandatoryTransforms:t(),applyTransforms:t()},{makeSafeEvaluator:t()},{provideCompartmentEvaluator:t(),compartmentEvaluate:t()},{makeEvalFunction:t()},{makeFunctionConstructor:t()},{constantProperties:t(),universalPropertyNames:t(),initialGlobalPropertyNames:t(),sharedGlobalPropertyNames:t(),uniqueGlobalPropertyNames:t(),NativeErrors:t(),FunctionInstance:t(),isAccessorPermit:t(),whitelist:t()},{setGlobalObjectConstantProperties:t(),setGlobalObjectMutableProperties:t(),setGlobalObjectEvaluators:t()},{makeAlias:t(),load:t()},{deferExports:t(),getDeferredExports:t()},{makeThirdPartyModuleInstance:t(),makeModuleInstance:t()},{link:t(),instantiate:t()},{InertCompartment:t(),CompartmentPrototype:t(),makeCompartmentConstructor:t()},{makeIntrinsicsCollector:t(),getGlobalIntrinsics:t()},{minEnablements:t(),moderateEnablements:t(),severeEnablements:t()},{default:t()},{makeEnvironmentCaptor:t()},{makeLoggingConsoleKit:t(),makeCausalConsole:t(),filterConsole:t(),consoleWhitelist:t(),BASE_CONSOLE_LEVEL:t()},{tameConsole:t()},{filterFileName:t(),shortenCallSiteString:t(),tameV8ErrorConstructor:t()},{default:t()},{getAnonymousIntrinsics:t()},{isTypedArray:t(),makeHardener:t()},{default:t()},{tameDomains:t()},{default:t()},{tameFunctionToString:t()},{default:t()},{default:t()},{default:t()},{default:t()},{repairIntrinsics:t(),lockdown:t()},{}],o=r.map((e=>Object.create(null,e)));for(let e=0;e<o.length;e+=1)r[e]["*"]=t(0,o[e]);function n(e,t,o){for(const[n,s]of e.get(t)){const e=r[o][n];if(void 0===e)throw new ReferenceError("Cannot import name "+n);for(const t of s)e.observe(t)}}e[0]({imports(e){new Map(e)},liveVar:{},onceVar:{universalThis:r[0].globalThis.set,Array:r[0].Array.set,Date:r[0].Date.set,Float32Array:r[0].Float32Array.set,JSON:r[0].JSON.set,Map:r[0].Map.set,Math:r[0].Math.set,Number:r[0].Number.set,Object:r[0].Object.set,Promise:r[0].Promise.set,Proxy:r[0].Proxy.set,Reflect:r[0].Reflect.set,FERAL_REG_EXP:r[0].FERAL_REG_EXP.set,Set:r[0].Set.set,String:r[0].String.set,WeakMap:r[0].WeakMap.set,WeakSet:r[0].WeakSet.set,FERAL_ERROR:r[0].FERAL_ERROR.set,RangeError:r[0].RangeError.set,ReferenceError:r[0].ReferenceError.set,SyntaxError:r[0].SyntaxError.set,TypeError:r[0].TypeError.set,assign:r[0].assign.set,create:r[0].create.set,defineProperties:r[0].defineProperties.set,entries:r[0].entries.set,freeze:r[0].freeze.set,getOwnPropertyDescriptor:r[0].getOwnPropertyDescriptor.set,getOwnPropertyDescriptors:r[0].getOwnPropertyDescriptors.set,getOwnPropertyNames:r[0].getOwnPropertyNames.set,getPrototypeOf:r[0].getPrototypeOf.set,is:r[0].is.set,isExtensible:r[0].isExtensible.set,keys:r[0].keys.set,objectPrototype:r[0].objectPrototype.set,seal:r[0].seal.set,preventExtensions:r[0].preventExtensions.set,setPrototypeOf:r[0].setPrototypeOf.set,values:r[0].values.set,speciesSymbol:r[0].speciesSymbol.set,toStringTagSymbol:r[0].toStringTagSymbol.set,iteratorSymbol:r[0].iteratorSymbol.set,matchAllSymbol:r[0].matchAllSymbol.set,symbolKeyFor:r[0].symbolKeyFor.set,symbolFor:r[0].symbolFor.set,isInteger:r[0].isInteger.set,stringifyJson:r[0].stringifyJson.set,fromEntries:r[0].fromEntries.set,defineProperty:r[0].defineProperty.set,apply:r[0].apply.set,construct:r[0].construct.set,reflectGet:r[0].reflectGet.set,reflectGetOwnPropertyDescriptor:r[0].reflectGetOwnPropertyDescriptor.set,reflectHas:r[0].reflectHas.set,reflectIsExtensible:r[0].reflectIsExtensible.set,ownKeys:r[0].ownKeys.set,reflectPreventExtensions:r[0].reflectPreventExtensions.set,reflectSet:r[0].reflectSet.set,isArray:r[0].isArray.set,arrayPrototype:r[0].arrayPrototype.set,mapPrototype:r[0].mapPrototype.set,proxyRevocable:r[0].proxyRevocable.set,regexpPrototype:r[0].regexpPrototype.set,setPrototype:r[0].setPrototype.set,stringPrototype:r[0].stringPrototype.set,weakmapPrototype:r[0].weakmapPrototype.set,weaksetPrototype:r[0].weaksetPrototype.set,functionPrototype:r[0].functionPrototype.set,promisePrototype:r[0].promisePrototype.set,typedArrayPrototype:r[0].typedArrayPrototype.set,uncurryThis:r[0].uncurryThis.set,objectHasOwnProperty:r[0].objectHasOwnProperty.set,arrayFilter:r[0].arrayFilter.set,arrayForEach:r[0].arrayForEach.set,arrayIncludes:r[0].arrayIncludes.set,arrayJoin:r[0].arrayJoin.set,arrayMap:r[0].arrayMap.set,arrayPop:r[0].arrayPop.set,arrayPush:r[0].arrayPush.set,arraySlice:r[0].arraySlice.set,arraySome:r[0].arraySome.set,arraySort:r[0].arraySort.set,iterateArray:r[0].iterateArray.set,mapSet:r[0].mapSet.set,mapGet:r[0].mapGet.set,mapHas:r[0].mapHas.set,iterateMap:r[0].iterateMap.set,setAdd:r[0].setAdd.set,setDelete:r[0].setDelete.set,setForEach:r[0].setForEach.set,setHas:r[0].setHas.set,iterateSet:r[0].iterateSet.set,regexpTest:r[0].regexpTest.set,regexpExec:r[0].regexpExec.set,matchAllRegExp:r[0].matchAllRegExp.set,stringEndsWith:r[0].stringEndsWith.set,stringIncludes:r[0].stringIncludes.set,stringIndexOf:r[0].stringIndexOf.set,stringMatch:r[0].stringMatch.set,stringReplace:r[0].stringReplace.set,stringSearch:r[0].stringSearch.set,stringSlice:r[0].stringSlice.set,stringSplit:r[0].stringSplit.set,stringStartsWith:r[0].stringStartsWith.set,iterateString:r[0].iterateString.set,weakmapDelete:r[0].weakmapDelete.set,weakmapGet:r[0].weakmapGet.set,weakmapHas:r[0].weakmapHas.set,weakmapSet:r[0].weakmapSet.set,weaksetAdd:r[0].weaksetAdd.set,weaksetGet:r[0].weaksetGet.set,weaksetHas:r[0].weaksetHas.set,functionToString:r[0].functionToString.set,promiseAll:r[0].promiseAll.set,promiseCatch:r[0].promiseCatch.set,promiseThen:r[0].promiseThen.set,getConstructorOf:r[0].getConstructorOf.set,immutableObject:r[0].immutableObject.set,isObject:r[0].isObject.set,isError:r[0].isError.set,FERAL_EVAL:r[0].FERAL_EVAL.set,FERAL_FUNCTION:r[0].FERAL_FUNCTION.set,noEvalEvaluate:r[0].noEvalEvaluate.set}}),e[1]({imports(e){new Map(e)},liveVar:{},onceVar:{}}),e[2]({imports(e){n(new Map(e),"../commons.js",0)},liveVar:{},onceVar:{an:r[2].an.set,bestEffortStringify:r[2].bestEffortStringify.set,enJoin:r[2].enJoin.set}}),e[3]({imports(e){new Map(e)},liveVar:{},onceVar:{}}),e[4]({imports(e){const t=new Map(e);n(t,"../commons.js",0),n(t,"./internal-types.js",1),n(t,"./stringify-utils.js",2),n(t,"./types.js",3)},liveVar:{},onceVar:{unredactedDetails:r[4].unredactedDetails.set,loggedErrorHandler:r[4].loggedErrorHandler.set,makeAssert:r[4].makeAssert.set,assert:r[4].assert.set}}),e[5]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{makeEvaluateFactory:r[5].makeEvaluateFactory.set}}),e[6]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{isValidIdentifierName:r[6].isValidIdentifierName.set,getScopeConstants:r[6].getScopeConstants.set}}),e[7]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4)},liveVar:{},onceVar:{createScopeHandler:r[7].createScopeHandler.set}}),e[8]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{getSourceURL:r[8].getSourceURL.set}}),e[9]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./get-source-url.js",8)},liveVar:{},onceVar:{rejectHtmlComments:r[9].rejectHtmlComments.set,evadeHtmlCommentTest:r[9].evadeHtmlCommentTest.set,rejectImportExpressions:r[9].rejectImportExpressions.set,evadeImportExpressionTest:r[9].evadeImportExpressionTest.set,rejectSomeDirectEvalExpressions:r[9].rejectSomeDirectEvalExpressions.set,mandatoryTransforms:r[9].mandatoryTransforms.set,applyTransforms:r[9].applyTransforms.set}}),e[10]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4),n(t,"./make-evaluate-factory.js",5),n(t,"./scope-constants.js",6),n(t,"./scope-handler.js",7),n(t,"./transforms.js",9)},liveVar:{},onceVar:{makeSafeEvaluator:r[10].makeSafeEvaluator.set}}),e[11]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./make-safe-evaluator.js",10),n(t,"./transforms.js",9)},liveVar:{},onceVar:{provideCompartmentEvaluator:r[11].provideCompartmentEvaluator.set,compartmentEvaluate:r[11].compartmentEvaluate.set}}),e[12]({imports(e){new Map(e)},liveVar:{},onceVar:{makeEvalFunction:r[12].makeEvalFunction.set}}),e[13]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4)},liveVar:{},onceVar:{makeFunctionConstructor:r[13].makeFunctionConstructor.set}}),e[14]({imports(e){new Map(e)},liveVar:{},onceVar:{constantProperties:r[14].constantProperties.set,universalPropertyNames:r[14].universalPropertyNames.set,initialGlobalPropertyNames:r[14].initialGlobalPropertyNames.set,sharedGlobalPropertyNames:r[14].sharedGlobalPropertyNames.set,uniqueGlobalPropertyNames:r[14].uniqueGlobalPropertyNames.set,NativeErrors:r[14].NativeErrors.set,FunctionInstance:r[14].FunctionInstance.set,isAccessorPermit:r[14].isAccessorPermit.set,whitelist:r[14].whitelist.set}}),e[15]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./make-eval-function.js",12),n(t,"./make-function-constructor.js",13),n(t,"./whitelist.js",14)},liveVar:{},onceVar:{setGlobalObjectConstantProperties:r[15].setGlobalObjectConstantProperties.set,setGlobalObjectMutableProperties:r[15].setGlobalObjectMutableProperties.set,setGlobalObjectEvaluators:r[15].setGlobalObjectEvaluators.set}}),e[16]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4)},liveVar:{},onceVar:{makeAlias:r[16].makeAlias.set,load:r[16].load.set}}),e[17]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4),n(t,"./module-load.js",16)},liveVar:{},onceVar:{deferExports:r[17].deferExports.set,getDeferredExports:r[17].getDeferredExports.set}}),e[18]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./compartment-evaluate.js",11),n(t,"./error/assert.js",4),n(t,"./module-proxy.js",17)},liveVar:{},onceVar:{makeThirdPartyModuleInstance:r[18].makeThirdPartyModuleInstance.set,makeModuleInstance:r[18].makeModuleInstance.set}}),e[19]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4),n(t,"./module-instance.js",18)},liveVar:{},onceVar:{link:r[19].link.set,instantiate:r[19].instantiate.set}}),e[20]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./compartment-evaluate.js",11),n(t,"./error/assert.js",4),n(t,"./global-object.js",15),n(t,"./make-safe-evaluator.js",10),n(t,"./module-link.js",19),n(t,"./module-load.js",16),n(t,"./module-proxy.js",17),n(t,"./scope-constants.js",6),n(t,"./whitelist.js",14)},liveVar:{},onceVar:{InertCompartment:r[20].InertCompartment.set,CompartmentPrototype:r[20].CompartmentPrototype.set,makeCompartmentConstructor:r[20].makeCompartmentConstructor.set}}),e[21]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./whitelist.js",14)},liveVar:{},onceVar:{makeIntrinsicsCollector:r[21].makeIntrinsicsCollector.set,getGlobalIntrinsics:r[21].getGlobalIntrinsics.set}}),e[22]({imports(e){new Map(e)},liveVar:{},onceVar:{minEnablements:r[22].minEnablements.set,moderateEnablements:r[22].moderateEnablements.set,severeEnablements:r[22].severeEnablements.set}}),e[23]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./enablements.js",22)},liveVar:{},onceVar:{default:r[23].default.set}}),e[24]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4)},liveVar:{},onceVar:{makeEnvironmentCaptor:r[24].makeEnvironmentCaptor.set}}),e[25]({imports(e){const t=new Map(e);n(t,"../commons.js",0),n(t,"./internal-types.js",1),n(t,"./types.js",3)},liveVar:{},onceVar:{makeLoggingConsoleKit:r[25].makeLoggingConsoleKit.set,makeCausalConsole:r[25].makeCausalConsole.set,filterConsole:r[25].filterConsole.set,consoleWhitelist:r[25].consoleWhitelist.set,BASE_CONSOLE_LEVEL:r[25].BASE_CONSOLE_LEVEL.set}}),e[26]({imports(e){const t=new Map(e);n(t,"../commons.js",0),n(t,"./assert.js",4),n(t,"./console.js",25),n(t,"./internal-types.js",1),n(t,"./types.js",3)},liveVar:{},onceVar:{tameConsole:r[26].tameConsole.set}}),e[27]({imports(e){n(new Map(e),"../commons.js",0)},liveVar:{},onceVar:{filterFileName:r[27].filterFileName.set,shortenCallSiteString:r[27].shortenCallSiteString.set,tameV8ErrorConstructor:r[27].tameV8ErrorConstructor.set}}),e[28]({imports(e){const t=new Map(e);n(t,"../commons.js",0),n(t,"../whitelist.js",14),n(t,"./tame-v8-error-constructor.js",27)},liveVar:{},onceVar:{default:r[28].default.set}}),e[29]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./compartment-shim.js",20)},liveVar:{},onceVar:{getAnonymousIntrinsics:r[29].getAnonymousIntrinsics.set}}),e[30]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4)},liveVar:{},onceVar:{isTypedArray:r[30].isTypedArray.set,makeHardener:r[30].makeHardener.set}}),e[31]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{default:r[31].default.set}}),e[32]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{tameDomains:r[32].tameDomains.set}}),e[33]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{default:r[33].default.set}}),e[34]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{tameFunctionToString:r[34].tameFunctionToString.set}}),e[35]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./error/assert.js",4)},liveVar:{},onceVar:{default:r[35].default.set}}),e[36]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{default:r[36].default.set}}),e[37]({imports(e){n(new Map(e),"./commons.js",0)},liveVar:{},onceVar:{default:r[37].default.set}}),e[38]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./whitelist.js",14)},liveVar:{},onceVar:{default:r[38].default.set}}),e[39]({imports(e){const t=new Map(e);n(t,"./commons.js",0),n(t,"./compartment-shim.js",20),n(t,"./enable-property-overrides.js",23),n(t,"./environment-options.js",24),n(t,"./error/assert.js",4),n(t,"./error/stringify-utils.js",2),n(t,"./error/tame-console.js",26),n(t,"./error/tame-error-constructor.js",28),n(t,"./get-anonymous-intrinsics.js",29),n(t,"./global-object.js",15),n(t,"./intrinsics.js",21),n(t,"./make-hardener.js",30),n(t,"./make-safe-evaluator.js",10),n(t,"./tame-date-constructor.js",31),n(t,"./tame-domains.js",32),n(t,"./tame-function-constructors.js",33),n(t,"./tame-function-tostring.js",34),n(t,"./tame-locale-methods.js",35),n(t,"./tame-math-object.js",36),n(t,"./tame-regexp-constructor.js",37),n(t,"./whitelist-intrinsics.js",38),n(t,"./whitelist.js",14)},liveVar:{},onceVar:{repairIntrinsics:r[39].repairIntrinsics.set,lockdown:r[39].lockdown.set}}),e[40]({imports(e){const t=new Map(e);n(t,"./src/commons.js",0),n(t,"./src/compartment-shim.js",20),n(t,"./src/error/assert.js",4),n(t,"./src/intrinsics.js",21),n(t,"./src/lockdown-shim.js",39),n(t,"./src/tame-function-tostring.js",34)},liveVar:{},onceVar:{}})})();
(()=>{var e={7209:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectMultiplex=void 0;const i=r(1258),s=n(r(8797)),o=n(r(9928)),a=r(9067),d=Symbol("IGNORE_SUBSTREAM");class c extends i.Duplex{constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new a.Substream({parent:this,name:e});return this._substreams[e]=t,function(e,r){const n=o.default((e=>t.destroy(e||void 0)));s.default(e,{readable:!1},n),s.default(e,{writable:!1},n)}(this),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=d}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const s=this._substreams[n];return s?(s!==d&&s.push(i),r()):(console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}}t.ObjectMultiplex=c},9067:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Substream=void 0;const n=r(1258);class i extends n.Duplex{constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}t.Substream=i},9952:(e,t,r)=>{"use strict";const n=r(7209);e.exports=n.ObjectMultiplex},470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePostMessageStream=void 0;const n=r(5523),i=()=>{},s="ACK";class o extends n.Duplex{constructor(){super({objectMode:!0}),this._init=!1,this._haveSyn=!1}_handshake(){this._write("SYN",null,i),this.cork()}_onData(e){if(this._init)try{this.push(e)}catch(e){this.emit("error",e)}else"SYN"===e?(this._haveSyn=!0,this._write(s,null,i)):e===s&&(this._init=!0,this._haveSyn||this._write(s,null,i),this.uncork())}_read(){}_write(e,t,r){this._postMessage(e),r()}}t.BasePostMessageStream=o},6993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorkerParentPostMessageStream=void 0;const n=r(470),i=r(7131);class s extends n.BasePostMessageStream{constructor({worker:e}){super(),this._target=i.DEDICATED_WORKER_NAME,this._worker=e,this._worker.onmessage=this._onMessage.bind(this),this._handshake()}_postMessage(e){this._worker.postMessage({target:this._target,data:e})}_onMessage(e){const t=e.data;(0,i.isValidStreamMessage)(t)&&this._onData(t.data)}_destroy(){this._worker.onmessage=null,this._worker=null}}t.WebWorkerParentPostMessageStream=s},672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorkerPostMessageStream=void 0;const n=r(470),i=r(7131);class s extends n.BasePostMessageStream{constructor(){if("undefined"==typeof self||"undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))throw new Error("WorkerGlobalScope not found. This class should only be instantiated in a WebWorker.");super(),this._name=i.DEDICATED_WORKER_NAME,self.onmessage=this._onMessage.bind(this),this._handshake()}_postMessage(e){self.postMessage({data:e})}_onMessage(e){const t=e.data;(0,i.isValidStreamMessage)(t)&&t.target===this._name&&this._onData(t.data)}_destroy(){}}t.WebWorkerPostMessageStream=s},9679:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2121),t),i(r(672),t),i(r(6993),t),i(r(6250),t),i(r(2456),t),i(r(4164),t),i(r(59),t),i(r(470),t)},2456:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessMessageStream=void 0;const n=r(470),i=r(7131);class s extends n.BasePostMessageStream{constructor(){if(super(),"function"!=typeof globalThis.process.send)throw new Error("Parent IPC channel not found. This class should only be instantiated in a Node.js child process.");this._onMessage=this._onMessage.bind(this),globalThis.process.on("message",this._onMessage),this._handshake()}_postMessage(e){globalThis.process.send({data:e})}_onMessage(e){(0,i.isValidStreamMessage)(e)&&this._onData(e.data)}_destroy(){globalThis.process.removeListener("message",this._onMessage)}}t.ProcessMessageStream=s},6250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessParentMessageStream=void 0;const n=r(470),i=r(7131);class s extends n.BasePostMessageStream{constructor({process:e}){super(),this._process=e,this._onMessage=this._onMessage.bind(this),this._process.on("message",this._onMessage),this._handshake()}_postMessage(e){this._process.send({data:e})}_onMessage(e){(0,i.isValidStreamMessage)(e)&&this._onData(e.data)}_destroy(){this._process.removeListener("message",this._onMessage)}}t.ProcessParentMessageStream=s},59:function(e,t,r){"use strict";var n,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ThreadMessageStream=void 0;const o=r(1267),a=r(470),d=r(7131);class c extends a.BasePostMessageStream{constructor(){if(super(),n.set(this,void 0),!o.parentPort)throw new Error("Parent port not found. This class should only be instantiated in a Node.js worker thread.");i(this,n,o.parentPort,"f"),this._onMessage=this._onMessage.bind(this),s(this,n,"f").on("message",this._onMessage),this._handshake()}_postMessage(e){s(this,n,"f").postMessage({data:e})}_onMessage(e){(0,d.isValidStreamMessage)(e)&&this._onData(e.data)}_destroy(){s(this,n,"f").removeListener("message",this._onMessage)}}t.ThreadMessageStream=c,n=new WeakMap},4164:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThreadParentMessageStream=void 0;const n=r(470),i=r(7131);class s extends n.BasePostMessageStream{constructor({thread:e}){super(),this._thread=e,this._onMessage=this._onMessage.bind(this),this._thread.on("message",this._onMessage),this._handshake()}_postMessage(e){this._thread.postMessage({data:e})}_onMessage(e){(0,i.isValidStreamMessage)(e)&&this._onData(e.data)}_destroy(){this._thread.removeListener("message",this._onMessage)}}t.ThreadParentMessageStream=s},7131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidStreamMessage=t.DEDICATED_WORKER_NAME=void 0;const n=r(5554);t.DEDICATED_WORKER_NAME="dedicatedWorker",t.isValidStreamMessage=function(e){return(0,n.isObject)(e)&&Boolean(e.data)&&("number"==typeof e.data||"object"==typeof e.data||"string"==typeof e.data)}},2121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowPostMessageStream=void 0;const n=r(470),i=r(7131);class s extends n.BasePostMessageStream{constructor({name:e,target:t,targetOrigin:r=location.origin,targetWindow:n=window}){if(super(),"undefined"==typeof window||"function"!=typeof window.postMessage)throw new Error("window.postMessage is not a function. This class should only be instantiated in a Window.");this._name=e,this._target=t,this._targetOrigin=r,this._targetWindow=n,this._onMessage=this._onMessage.bind(this),window.addEventListener("message",this._onMessage,!1),this._handshake()}_postMessage(e){this._targetWindow.postMessage({target:this._target,data:e},this._targetOrigin)}_onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||!(0,i.isValidStreamMessage)(t)||t.target!==this._name||this._onData(t.data)}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}t.WindowPostMessageStream=s},2646:e=>{"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports=function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,r)}));case 4:return process.nextTick((function(){e.call(null,t,r,n)}));default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return process.nextTick((function(){e.apply(null,i)}))}}:e.exports=process.nextTick},1034:(e,t,r)=>{"use strict";var n=r(2646),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var s=r(7646);s.inherits=r(8874);var o=r(7187),a=r(3597);s.inherits(l,o);for(var d=i(a.prototype),c=0;c<d.length;c++){var u=d[c];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),n(t,e)}},2598:(e,t,r)=>{"use strict";e.exports=s;var n=r(2287),i=r(7646);function s(e){if(!(this instanceof s))return new s(e);n.call(this,e)}i.inherits=r(8874),i.inherits(s,n),s.prototype._transform=function(e,t,r){r(null,e)}},7187:(e,t,r)=>{"use strict";var n=r(2646);e.exports=w;var i,s=r(7906);w.ReadableState=b,r(2361).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=r(6611),d=r(5691).Buffer,c=global.Uint8Array||function(){},u=r(7646);u.inherits=r(8874);var l=r(3837),h=void 0;h=l&&l.debuglog?l.debuglog("stream"):function(){};var f,p=r(8991),g=r(8374);u.inherits(w,a);var m=["error","close","destroy","pause","resume"];function b(e,t){i=i||r(1034),e=e||{},this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,s=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(5099).s),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function w(e){if(i=i||r(1034),!(this instanceof w))return new w(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function y(e,t,r,n,i){var s,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,E(e)}}(e,o)):(i||(s=function(e,t){var r,n;return n=t,d.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=function(e){return d.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):v(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?v(e,o,t,!1):R(e,o)):v(e,o,t,!1))):n||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function v(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&E(e)),R(e,t)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=g.destroy,w.prototype._undestroy=g.undestroy,w.prototype._destroy=function(e,t){this.push(null),t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=d.from(e,t),t=""),r=!0),y(this,e,t,!1,r)},w.prototype.unshift=function(e){return y(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){return f||(f=r(5099).s),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var _=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=_?e=_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n(M,e):M(e))}function M(e){h("emit readable"),e.emit("readable"),j(e)}function R(e,t){t.readingMore||(t.readingMore=!0,n(O,e,t))}function O(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function P(e){h("readable nexttick read 0"),e.read(0)}function k(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0==(e-=o)){o===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=d.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,o),0==(e-=o)){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n(N,t,e))}function N(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function T(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):E(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&C(this),null;var n,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(r,t))),null===(n=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&C(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var a=t&&!1===t.end||e===process.stdout||e===process.stderr?b:d;function d(){h("onend"),e.end()}i.endEmitted?n(a):r.once("end",a),e.on("unpipe",(function t(n,s){h("onunpipe"),n===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,h("cleanup"),e.removeListener("close",g),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",t),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",f),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,j(e))}}(r);e.on("drain",c);var u=!1,l=!1;function f(t){h("ondata"),l=!1,!1!==e.write(t)||l||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==T(i.pipes,e))&&!u&&(h("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function p(t){h("onerror",t),b(),e.removeListener("error",p),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",m),b()}function m(){h("onfinish"),e.removeListener("close",g),b()}function b(){h("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?s(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",p),e.once("close",g),e.once("finish",m),e.emit("pipe",r),i.flowing||(h("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,r);return this}var o=T(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},w.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&E(this):n(P,this))}return r},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n(k,e,t))}(this,e)),this},w.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(h("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){h("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<m.length;s++)e.on(m[s],n.emit.bind(n,m[s]));return n._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},n},w._fromList=x},2287:(e,t,r)=>{"use strict";e.exports=o;var n=r(1034),i=r(7646);function s(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r),i(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState=new s(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e,r){a(t,e,r)})):a(t)}))}function a(e,t,r){if(t)return e.emit("error",t);null!=r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(8874),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},3597:(e,t,r)=>{"use strict";var n=r(2646);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var s,o=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n;m.WritableState=g;var a=r(7646);a.inherits=r(8874);var d,c={deprecate:r(3854)},u=r(6611),l=r(5691).Buffer,h=global.Uint8Array||function(){},f=r(8374);function p(){}function g(e,t){s=s||r(1034),e=e||{},this.objectMode=!!e.objectMode,t instanceof s&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,d=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n(s,i),n(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(s(i),e._writableState.errorEmitted=!0,e.emit("error",i),S(e,t))}(e,r,i,t,s);else{var a=v(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||y(e,r),i?o(w,e,r,a,s):w(e,r,a,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function m(e){if(s=s||r(1034),!(d.call(m,this)||this instanceof s))return new m(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function b(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function y(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,s=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,d=!0;r;)s[a]=r,r.isBuf||(d=!1),r=r.next,a+=1;s.allBuffers=d,b(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t)}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,u,l),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r=v(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}a.inherits(m,u),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||e&&e._writableState instanceof g}})):d=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,r){var i,s=this._writableState,o=!1,a=(i=e,(l.isBuffer(i)||i instanceof h)&&!s.objectMode);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=p),s.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),n(t,r)}(this,r):(a||function(e,t,r,i){var s=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),n(i,o),s=!1),s}(this,s,e,r))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,a,n,i,s);return d}(this,s,a,e,t,r)),o},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},m.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?n(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=f.destroy,m.prototype._undestroy=f.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}},8991:(e,t,r)=>{"use strict";var n=r(5691).Buffer;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i=n.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=i,r=o,s.data.copy(t,r),o+=s.data.length,s=s.next;return i},e}()},8374:(e,t,r)=>{"use strict";var n=r(2646);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;s||o?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},6611:(e,t,r)=>{e.exports=r(2781)},5523:(e,t,r)=>{var n=r(2781);"disable"===process.env.READABLE_STREAM&&n?(e.exports=n,(t=e.exports=n.Readable).Readable=n.Readable,t.Writable=n.Writable,t.Duplex=n.Duplex,t.Transform=n.Transform,t.PassThrough=n.PassThrough,t.Stream=n):((t=e.exports=r(7187)).Stream=n||t,t.Readable=t,t.Writable=r(3597),t.Duplex=r(1034),t.Transform=r(2287),t.PassThrough=r(2598))},5691:(e,t,r)=>{var n=r(4300),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},5099:(e,t,r)=>{"use strict";var n=r(5691).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=d,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=l,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},4044:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseProvider=void 0;const i=n(r(3795)),s=r(8094),o=n(r(8787)),a=r(1280),d=n(r(2371)),c=r(4022);class u extends i.default{constructor({logger:e=console,maxEventListeners:t=100,rpcMiddleware:r=[]}={}){super(),this._log=e,this.setMaxListeners(t),this._state=Object.assign({},u._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this),this.on("connect",(()=>{this._state.isConnected=!0}));const n=new a.JsonRpcEngine;r.forEach((e=>n.push(e))),this._rpcEngine=n}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw s.ethErrors.rpc.invalidRequest({message:d.default.errors.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw s.ethErrors.rpc.invalidRequest({message:d.default.errors.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw s.ethErrors.rpc.invalidRequest({message:d.default.errors.invalidRequestParams(),data:e});return new Promise(((e,n)=>{this._rpcRequest({method:t,params:r},c.getRpcPromiseCallback(e,n))}))}_initializeState(e){if(!0===this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:t,chainId:r,isUnlocked:n,networkVersion:i}=e;this.emit("connect",{chainId:r}),this._handleChainChanged({chainId:r,networkVersion:i}),this._handleUnlockStateChanged({accounts:t,isUnlocked:n}),this._handleAccountsChanged(t)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,t){let r=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(r=(r,n)=>{this._handleAccountsChanged(n.result||[],"eth_accounts"===e.method),t(r,n)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(d.default.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new s.EthereumRpcError(1013,t||d.default.errors.disconnected()),this._log.debug(r)):(r=new s.EthereumRpcError(1011,t||d.default.errors.permanentlyDisconnected()),this._log.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){c.isValidChainId(e)?(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):this._log.error(d.default.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,t=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const t of e)if("string"!=typeof t){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}o.default(this._state.accounts,r)||(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,this.selectedAddress!==r[0]&&(this.selectedAddress=r[0]||null),this._state.initialized&&this.emit("accountsChanged",r))}_handleUnlockStateChanged({accounts:e,isUnlocked:t}={}){"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}}t.BaseProvider=u,u._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1}},9461:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MetaMaskInpageProvider=t.MetaMaskInpageProviderStreamName=void 0;const i=r(8094),s=r(23),o=n(r(2371)),a=r(4022),d=r(908);t.MetaMaskInpageProviderStreamName="metamask-provider";class c extends d.AbstractStreamProvider{constructor(e,{jsonRpcStreamName:r=t.MetaMaskInpageProviderStreamName,logger:n=console,maxEventListeners:i,shouldSendMetadata:o}={}){if(super(e,{jsonRpcStreamName:r,logger:n,maxEventListeners:i,rpcMiddleware:a.getDefaultExternalMiddleware(n)}),this._sentWarnings={enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},this._initializeStateAsync(),this.networkVersion=null,this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",(e=>{const{method:t}=e;a.EMITTED_NOTIFICATIONS.includes(t)&&(this.emit("data",e),this.emit("notification",e.params.result))})),o)if("complete"===document.readyState)s.sendSiteMetadata(this._rpcEngine,this._log);else{const e=()=>{s.sendSiteMetadata(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",e)};window.addEventListener("DOMContentLoaded",e)}}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}_handleDisconnect(e,t){super._handleDisconnect(e,t),this.networkVersion&&!e&&(this.networkVersion=null)}_warnOfDeprecation(e){var t;!1===(null===(t=this._sentWarnings)||void 0===t?void 0:t.events[e])&&(this._log.warn(o.default.warnings.events[e]),this._sentWarnings.events[e]=!0)}enable(){return this._sentWarnings.enable||(this._log.warn(o.default.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(((e,t)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},a.getRpcPromiseCallback(e,t))}catch(e){t(e)}}))}send(e,t){return this._sentWarnings.send||(this._log.warn(o.default.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise(((r,n)=>{try{this._rpcRequest({method:e,params:t},a.getRpcPromiseCallback(r,n,!1))}catch(e){n(e)}}))}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(e,a.NOOP),t=!0;break;case"net_version":t=this.networkVersion||null;break;default:throw new Error(o.default.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise((e=>{this.on("_initialized",(()=>e()))})),this._state.isUnlocked),requestBatch:async e=>{if(!Array.isArray(e))throw i.ethErrors.rpc.invalidRequest({message:"Batch requests must be made with an array of request objects.",data:e});return new Promise(((t,r)=>{this._rpcRequest(e,a.getRpcPromiseCallback(t,r))}))}},{get:(e,t,...r)=>(this._sentWarnings.experimentalMethods||(this._log.warn(o.default.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...r))})}_handleChainChanged({chainId:e,networkVersion:t}={}){super._handleChainChanged({chainId:e,networkVersion:t}),this._state.isConnected&&t!==this.networkVersion&&(this.networkVersion=t,this._state.initialized&&this.emit("networkChanged",this.networkVersion))}}t.MetaMaskInpageProvider=c},908:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamProvider=t.AbstractStreamProvider=void 0;const i=n(r(9952)),s=r(8607),o=r(1384),a=n(r(3171)),d=n(r(2371)),c=r(4022),u=r(4044);class l extends u.BaseProvider{constructor(e,{jsonRpcStreamName:t,logger:r,maxEventListeners:n,rpcMiddleware:u}){if(super({logger:r,maxEventListeners:n,rpcMiddleware:u}),!s.duplex(e))throw new Error(d.default.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const l=new i.default;a.default(e,l,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=o.createStreamMiddleware(),a.default(this._jsonRpcConnection.stream,l.createStream(t),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",(t=>{const{method:r,params:n}=t;"metamask_accountsChanged"===r?this._handleAccountsChanged(n):"metamask_unlockStateChanged"===r?this._handleUnlockStateChanged(n):"metamask_chainChanged"===r?this._handleChainChanged(n):c.EMITTED_NOTIFICATIONS.includes(r)?this.emit("message",{type:r,data:n}):"METAMASK_STREAM_FAILURE"===r&&e.destroy(new Error(d.default.errors.permanentlyDisconnected()))}))}async _initializeStateAsync(){let e;try{e=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(e)}_handleStreamDisconnect(e,t){let r=`MetaMask: Lost connection to "${e}".`;(null==t?void 0:t.stack)&&(r+=`\n${t.stack}`),this._log.warn(r),this.listenerCount("error")>0&&this.emit("error",r),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged({chainId:e,networkVersion:t}={}){c.isValidChainId(e)&&c.isValidNetworkVersion(t)?"loading"===t?this._handleDisconnect(!0):super._handleChainChanged({chainId:e}):this._log.error(d.default.errors.invalidNetworkParams(),{chainId:e,networkVersion:t})}}t.AbstractStreamProvider=l,t.StreamProvider=class extends l{async initialize(){return this._initializeStateAsync()}}},5817:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createExternalExtensionProvider=void 0;const i=n(r(3274)),s=r(4924),o=r(9461),a=r(908),d=r(4022),c=n(r(5543)),u=s.detect();t.createExternalExtensionProvider=function(){let e;try{const t=function(){switch(null==u?void 0:u.name){case"chrome":default:return c.default.CHROME_ID;case"firefox":return c.default.FIREFOX_ID}}(),r=chrome.runtime.connect(t),n=new i.default(r);e=new a.StreamProvider(n,{jsonRpcStreamName:o.MetaMaskInpageProviderStreamName,logger:console,rpcMiddleware:d.getDefaultExternalMiddleware(console)}),e.initialize()}catch(e){throw console.dir("MetaMask connect error.",e),e}return e}},2972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamProvider=t.shimWeb3=t.setGlobalProvider=t.MetaMaskInpageProvider=t.MetaMaskInpageProviderStreamName=t.initializeProvider=t.createExternalExtensionProvider=t.BaseProvider=void 0;const n=r(4044);Object.defineProperty(t,"BaseProvider",{enumerable:!0,get:function(){return n.BaseProvider}});const i=r(5817);Object.defineProperty(t,"createExternalExtensionProvider",{enumerable:!0,get:function(){return i.createExternalExtensionProvider}});const s=r(6352);Object.defineProperty(t,"initializeProvider",{enumerable:!0,get:function(){return s.initializeProvider}}),Object.defineProperty(t,"setGlobalProvider",{enumerable:!0,get:function(){return s.setGlobalProvider}});const o=r(9461);Object.defineProperty(t,"MetaMaskInpageProvider",{enumerable:!0,get:function(){return o.MetaMaskInpageProvider}}),Object.defineProperty(t,"MetaMaskInpageProviderStreamName",{enumerable:!0,get:function(){return o.MetaMaskInpageProviderStreamName}});const a=r(6473);Object.defineProperty(t,"shimWeb3",{enumerable:!0,get:function(){return a.shimWeb3}});const d=r(908);Object.defineProperty(t,"StreamProvider",{enumerable:!0,get:function(){return d.StreamProvider}})},6352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalProvider=t.initializeProvider=void 0;const n=r(9461),i=r(6473);function s(e){window.ethereum=e,window.dispatchEvent(new Event("ethereum#initialized"))}t.initializeProvider=function({connectionStream:e,jsonRpcStreamName:t,logger:r=console,maxEventListeners:o=100,shouldSendMetadata:a=!0,shouldSetOnWindow:d=!0,shouldShimWeb3:c=!1}){const u=new n.MetaMaskInpageProvider(e,{jsonRpcStreamName:t,logger:r,maxEventListeners:o,shouldSendMetadata:a}),l=new Proxy(u,{deleteProperty:()=>!0});return d&&s(l),c&&i.shimWeb3(l,r),l},t.setGlobalProvider=s},2371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`MetaMask: Connected to chain with ID "${e}".`},warnings:{enableDeprecation:"MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sendDeprecation:"MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",events:{close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}}},6473:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimWeb3=void 0,t.shimWeb3=function(e,t=console){let r=!1,n=!1;if(!window.web3){const i="__isMetaMaskShim__";let s={currentProvider:e};Object.defineProperty(s,i,{value:!0,enumerable:!0,configurable:!1,writable:!1}),s=new Proxy(s,{get:(s,o,...a)=>("currentProvider"!==o||r?"currentProvider"===o||o===i||n||(n=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch((e=>{t.debug("MetaMask: Failed to log web3 shim usage.",e)}))):(r=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(s,o,...a)),set:(...e)=>(t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...e))}),Object.defineProperty(window,"web3",{value:s,enumerable:!1,configurable:!0,writable:!0})}}},23:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendSiteMetadata=void 0;const i=n(r(2371)),s=r(4022);function o(e){const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:window.location.hostname}async function a(e){const{document:t}=e,r=t.querySelectorAll('head > link[rel~="icon"]');for(const e of r)if(e&&await d(e.href))return e.href;return null}function d(e){return new Promise(((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(e){r(e)}}))}t.sendSiteMetadata=async function(e,t){try{const t=await async function(){return{name:o(window),icon:await a(window)}}();e.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:t},s.NOOP)}catch(e){t.error({message:i.default.errors.sendSiteMetadata(),originalError:e})}}},4022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP=t.isValidNetworkVersion=t.isValidChainId=t.getRpcPromiseCallback=t.getDefaultExternalMiddleware=t.EMITTED_NOTIFICATIONS=void 0;const n=r(1280),i=r(8094);t.EMITTED_NOTIFICATIONS=Object.freeze(["eth_subscription"]),t.getDefaultExternalMiddleware=(e=console)=>{return[n.createIdRemapMiddleware(),(t=e,(e,r,n)=>{"string"==typeof e.method&&e.method||(r.error=i.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),n((e=>{const{error:n}=r;return n?(t.error(`MetaMask - RPC Error: ${n.message}`,n),e()):e()}))})];var t},t.getRpcPromiseCallback=(e,t,r=!0)=>(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)},t.isValidChainId=e=>Boolean(e)&&"string"==typeof e&&e.startsWith("0x"),t.isValidNetworkVersion=e=>Boolean(e)&&"string"==typeof e,t.NOOP=()=>{}},8787:e=>{"use strict";var t=Array.isArray,r=Object.keys,n=Object.prototype.hasOwnProperty;e.exports=function e(i,s){if(i===s)return!0;if(i&&s&&"object"==typeof i&&"object"==typeof s){var o,a,d,c=t(i),u=t(s);if(c&&u){if((a=i.length)!=s.length)return!1;for(o=a;0!=o--;)if(!e(i[o],s[o]))return!1;return!0}if(c!=u)return!1;var l=i instanceof Date,h=s instanceof Date;if(l!=h)return!1;if(l&&h)return i.getTime()==s.getTime();var f=i instanceof RegExp,p=s instanceof RegExp;if(f!=p)return!1;if(f&&p)return i.toString()==s.toString();var g=r(i);if((a=g.length)!==r(s).length)return!1;for(o=a;0!=o--;)if(!n.call(s,g[o]))return!1;for(o=a;0!=o--;)if(!e(i[d=g[o]],s[d]))return!1;return!0}return i!=i&&s!=s}},3795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2361);function i(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class s extends n.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const s=n[e];if(void 0===s)return!1;if("function"==typeof s)i(s,this,t);else{const e=s.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let n=0;n<e;n+=1)i(r[n],this,t)}return!0}}t.default=s},5554:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9545),t),i(r(758),t),i(r(2968),t)},9545:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonRpcIdValidator=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.jsonrpc2=t.isValidJson=void 0;const i=n(r(9378)),s=r(758);function o(e){return!s.hasProperty(e,"id")}function a(e){return s.hasProperty(e,"id")}function d(e){return s.hasProperty(e,"result")}function c(e){return s.hasProperty(e,"error")}t.isValidJson=function(e){try{return i.default(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}},t.jsonrpc2="2.0",t.isJsonRpcNotification=o,t.assertIsJsonRpcNotification=function(e){if(!o(e))throw new Error("Not a JSON-RPC notification.")},t.isJsonRpcRequest=a,t.assertIsJsonRpcRequest=function(e){if(!a(e))throw new Error("Not a JSON-RPC request.")},t.isJsonRpcSuccess=d,t.assertIsJsonRpcSuccess=function(e){if(!d(e))throw new Error("Not a successful JSON-RPC response.")},t.isJsonRpcFailure=c,t.assertIsJsonRpcFailure=function(e){if(!c(e))throw new Error("Not a failed JSON-RPC response.")},t.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}},758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0,t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},t.isNullOrUndefined=function(e){return null==e},t.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},t.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t)},2968:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,(r=t.Duration||(t.Duration={}))[r.Millisecond=1]="Millisecond",r[r.Second=1e3]="Second",r[r.Minute=6e4]="Minute",r[r.Hour=36e5]="Hour",r[r.Day=864e5]="Day",r[r.Week=6048e5]="Week",r[r.Year=31536e6]="Year";const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};t.inMilliseconds=function(e,t){return n(e,"count"),e*t},t.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}},7646:(e,t)=>{function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},4924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BrowserInfo:()=>i,NodeInfo:()=>s,SearchBotDeviceInfo:()=>o,BotInfo:()=>a,ReactNativeInfo:()=>d,detect:()=>h,browserName:()=>p,parseUserAgent:()=>g,detectOS:()=>m,getNodeVersion:()=>b});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},s=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},o=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},a=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},d=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],l=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(e){return e?g(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new d:"undefined"!=typeof navigator?g(navigator.userAgent):b()}function f(e){return""!==e&&u.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}function p(e){var t=f(e);return t?t[0]:null}function g(e){var t=f(e);if(!t)return null;var r=t[0],s=t[1];if("searchbot"===r)return new a;var d=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);d?d.length<3&&(d=n(n([],d,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-d.length),!0)):d=[];var u=d.join("."),l=m(e),h=c.exec(e);return h&&h[1]?new o(r,u,l,h[1]):new i(r,u,l)}function m(e){for(var t=0,r=l.length;t<r;t++){var n=l[t],i=n[0];if(n[1].exec(e))return i}return null}function b(){return"undefined"!=typeof process&&process.version?new s(process.version.slice(1)):null}},8797:(e,t,r)=>{var n=r(9928),i=function(){},s=function(e,t,r){if("function"==typeof t)return s(e,null,t);t||(t={}),r=n(r||i);var o=e._writableState,a=e._readableState,d=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,u=!1,l=function(){e.writable||h()},h=function(){c=!1,d||r.call(e)},f=function(){d=!1,c||r.call(e)},p=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},g=function(t){r.call(e,t)},m=function(){process.nextTick(b)},b=function(){if(!u)return(!d||a&&a.ended&&!a.destroyed)&&(!c||o&&o.ended&&!o.destroyed)?void 0:r.call(e,new Error("premature close"))},w=function(){e.req.on("finish",h)};return function(e){return e.setHeader&&"function"==typeof e.abort}(e)?(e.on("complete",h),e.on("abort",m),e.req?w():e.on("request",w)):c&&!o&&(e.on("end",l),e.on("close",l)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",p),e.on("end",f),e.on("finish",h),!1!==t.error&&e.on("error",g),e.on("close",m),function(){u=!0,e.removeListener("complete",h),e.removeListener("abort",m),e.removeListener("request",w),e.req&&e.req.removeListener("finish",h),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("exit",p),e.removeListener("end",f),e.removeListener("error",g),e.removeListener("close",m)}};e.exports=s},4723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const n=r(7847);class i extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return n.default(this.serialize(),s,2)}}function s(e,t){if("[Circular]"!==t)return t}t.EthereumRpcError=i,t.EthereumProviderError=class extends i{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}},4792:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},8159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const n=r(4723),i=r(894),s=r(4792);function o(e,t){const[r,s]=d(t);return new n.EthereumRpcError(e,r||i.getMessageFromCode(e),s)}function a(e,t){const[r,s]=d(t);return new n.EthereumProviderError(e,r||i.getMessageFromCode(e),s)}function d(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}t.ethErrors={rpc:{parse:e=>o(s.errorCodes.rpc.parse,e),invalidRequest:e=>o(s.errorCodes.rpc.invalidRequest,e),invalidParams:e=>o(s.errorCodes.rpc.invalidParams,e),methodNotFound:e=>o(s.errorCodes.rpc.methodNotFound,e),internal:e=>o(s.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return o(t,e)},invalidInput:e=>o(s.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>o(s.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>o(s.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>o(s.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>o(s.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>o(s.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>a(s.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(s.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(s.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(s.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(s.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,i)}}}},8094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const n=r(4723);Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return n.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});const i=r(894);Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return i.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return i.getMessageFromCode}});const s=r(8159);Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return s.ethErrors}});const o=r(4792);Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})},894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=r(4792),i=r(4723),s=n.errorCodes.rpc.internal,o={code:s,message:a(s)};function a(e,r="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(e)){const r=e.toString();if(l(n.errorValues,r))return n.errorValues[r].message;if(c(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function d(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!n.errorValues[t]||!!c(e)}function c(e){return e>=-32099&&e<=-32e3}function u(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=a,t.isValidCode=d,t.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!1}={}){var n,s;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof i.EthereumRpcError)return e.serialize();const c={};if(e&&"object"==typeof e&&!Array.isArray(e)&&l(e,"code")&&d(e.code)){const t=e;c.code=t.code,t.message&&"string"==typeof t.message?(c.message=t.message,l(t,"data")&&(c.data=t.data)):(c.message=a(c.code),c.data={originalError:u(e)})}else{c.code=t.code;const r=null===(n=e)||void 0===n?void 0:n.message;c.message=r&&"string"==typeof r?r:t.message,c.data={originalError:u(e)}}const h=null===(s=e)||void 0===s?void 0:s.stack;return r&&e&&h&&"string"==typeof h&&(c.stack=h),c}},3274:(e,t,r)=>{"use strict";const n=r(2781);e.exports=class extends n.Duplex{constructor(e){super({objectMode:!0}),this._port=e,this._port.onMessage.addListener((e=>this._onMessage(e))),this._port.onDisconnect.addListener((()=>this._onDisconnect()))}_onMessage(e){if(Buffer.isBuffer(e)){const t=Buffer.from(e);this.push(t)}else this.push(e)}_onDisconnect(){this.destroy()}_read(){}_write(e,t,r){try{if(Buffer.isBuffer(e)){const t=e.toJSON();t._isBuffer=!0,this._port.postMessage(t)}else this._port.postMessage(e)}catch(e){return r(new Error("PortDuplexStream - disconnected"))}return r()}}},9378:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;0!=i--;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},7847:e=>{e.exports=n,n.default=n,n.stable=o,n.stableStringify=o;var t=[],r=[];function n(e,n,s){var o;for(i(e,"",[],void 0),o=0===r.length?JSON.stringify(e,n,s):JSON.stringify(e,d(n),s);0!==t.length;){var a=t.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}return o}function i(e,n,s,o){var a;if("object"==typeof e&&null!==e){for(a=0;a<s.length;a++)if(s[a]===e){var d=Object.getOwnPropertyDescriptor(o,n);return void(void 0!==d.get?d.configurable?(Object.defineProperty(o,n,{value:"[Circular]"}),t.push([o,n,e,d])):r.push([e,n]):(o[n]="[Circular]",t.push([o,n,e])))}if(s.push(e),Array.isArray(e))for(a=0;a<e.length;a++)i(e[a],a,s,e);else{var c=Object.keys(e);for(a=0;a<c.length;a++){var u=c[a];i(e[u],u,s,e)}}s.pop()}}function s(e,t){return e<t?-1:e>t?1:0}function o(e,n,i){var s,o=a(e,"",[],void 0)||e;for(s=0===r.length?JSON.stringify(o,n,i):JSON.stringify(o,d(n),i);0!==t.length;){var c=t.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}return s}function a(e,n,i,o){var d;if("object"==typeof e&&null!==e){for(d=0;d<i.length;d++)if(i[d]===e){var c=Object.getOwnPropertyDescriptor(o,n);return void(void 0!==c.get?c.configurable?(Object.defineProperty(o,n,{value:"[Circular]"}),t.push([o,n,e,c])):r.push([e,n]):(o[n]="[Circular]",t.push([o,n,e])))}if("function"==typeof e.toJSON)return;if(i.push(e),Array.isArray(e))for(d=0;d<e.length;d++)a(e[d],d,i,e);else{var u={},l=Object.keys(e).sort(s);for(d=0;d<l.length;d++){var h=l[d];a(e[h],h,i,e),u[h]=e[h]}if(void 0===o)return u;t.push([o,n,e]),o[n]=u}i.pop()}}function d(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(r.length>0)for(var i=0;i<r.length;i++){var s=r[i];if(s[1]===t&&s[0]===n){n="[Circular]",r.splice(i,1);break}}return e.call(this,t,n)}}},8874:(e,t,r)=>{try{var n=r(3837);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(1285)}},1285:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},8607:e=>{"use strict";const t=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;t.writable=e=>t(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,t.readable=e=>t(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState,e.exports=t},7906:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},2539:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcEngine=void 0;const i=n(r(3795)),s=r(8094);class o extends i.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,s,a]=await o._runAllMiddleware(e,t,this._middleware);return s?(await o._runReturnHandlers(a),n(i)):r((async e=>{try{await o._runReturnHandlers(a)}catch(t){return e(t)}return e()}))}catch(e){return n(e)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new s.EthereumRpcError(s.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:void 0,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new s.EthereumRpcError(s.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=Object.assign({},e),n={id:r.id,jsonrpc:r.jsonrpc};let i=null;try{await this._processRequest(r,n)}catch(e){i=e}return i&&(delete n.result,n.error||(n.error=s.serializeError(i))),t(i,n)}async _processRequest(e,t){const[r,n,i]=await o._runAllMiddleware(e,t,this._middleware);if(o._checkForCompletion(e,t,n),await o._runReturnHandlers(i),r)throw r}static async _runAllMiddleware(e,t,r){const n=[];let i=null,s=!1;for(const a of r)if([i,s]=await o._runMiddleware(e,t,a,n),s)break;return[i,s,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((i=>{const o=e=>{const r=e||t.error;r&&(t.error=s.serializeError(r)),i([r,!0])},d=r=>{t.error?o(t.error):(r&&("function"!=typeof r&&o(new s.EthereumRpcError(s.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${a(e)}`,{request:e})),n.push(r)),i([null,!1]))};try{r(e,t,d,o)}catch(e){o(e)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new s.EthereumRpcError(s.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${a(e)}`,{request:e});if(!r)throw new s.EthereumRpcError(s.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${a(e)}`,{request:e})}}function a(e){return JSON.stringify(e,null,2)}t.JsonRpcEngine=o},7573:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncMiddleware=void 0,t.createAsyncMiddleware=function(e){return async(t,r,n,i)=>{let s;const o=new Promise((e=>{s=e}));let a=null,d=!1;const c=async()=>{d=!0,n((e=>{a=e,s()})),await o};try{await e(t,r,c),d?(await o,a(null)):i(null)}catch(e){a?a(e):i(e)}}}},9141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScaffoldMiddleware=void 0,t.createScaffoldMiddleware=function(e){return(t,r,n,i)=>{const s=e[t.method];return void 0===s?n():"function"==typeof s?s(t,r,n,i):(r.result=s,i())}}},5104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=void 0;const r=4294967295;let n=Math.floor(Math.random()*r);t.getUniqueId=function(){return n=(n+1)%r,n}},169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIdRemapMiddleware=void 0;const n=r(5104);t.createIdRemapMiddleware=function(){return(e,t,r,i)=>{const s=e.id,o=n.getUniqueId();e.id=o,t.id=o,r((r=>{e.id=s,t.id=s,r()}))}}},1280:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(169),t),i(r(7573),t),i(r(9141),t),i(r(5104),t),i(r(2539),t),i(r(1759),t)},1759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMiddleware=void 0;const n=r(2539);t.mergeMiddleware=function(e){const t=new n.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}},2408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1258);t.default=function(e){if(!e||!e.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new n.Duplex({objectMode:!0,read:function(){},write:function(e,n,i){t.handle(e,((e,t)=>{r.push(t)})),i()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}},3603:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(3795)),s=r(1258);t.default=function(){const e={},t=new s.Duplex({objectMode:!0,read:function(){return!1},write:function(t,n,i){let s;try{t.id?function(t){const r=e[t.id];if(!r)throw new Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(t):function(e){r.emit("notification",e)}(t)}catch(e){s=e}i(s)}}),r=new i.default;return{events:r,middleware:(r,n,i,s)=>{t.push(r),e[r.id]={req:r,res:n,next:i,end:s}},stream:t}}},1384:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createStreamMiddleware=t.createEngineStream=void 0;const i=n(r(2408));t.createEngineStream=i.default;const s=n(r(3603));t.createStreamMiddleware=s.default},9928:(e,t,r)=>{var n=r(8892);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(s),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},2884:e=>{"use strict";"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,r)}));case 4:return process.nextTick((function(){e.call(null,t,r,n)}));default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return process.nextTick((function(){e.apply(null,i)}))}}}:e.exports=process},3171:(e,t,r)=>{var n=r(9928),i=r(8797),s=r(7147),o=function(){},a=/^v?\.0/.test(process.version),d=function(e){return"function"==typeof e},c=function(e,t,r,c){c=n(c);var u=!1;e.on("close",(function(){u=!0})),i(e,{readable:t,writable:r},(function(e){if(e)return c(e);u=!0,c()}));var l=!1;return function(t){if(!u&&!l)return l=!0,function(e){return!!a&&!!s&&(e instanceof(s.ReadStream||o)||e instanceof(s.WriteStream||o))&&d(e.close)}(e)?e.close(o):function(e){return e.setHeader&&d(e.abort)}(e)?e.abort():d(e.destroy)?e.destroy():void c(t||new Error("stream was destroyed"))}},u=function(e){e()},l=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=d(t[t.length-1]||o)&&t.pop()||o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(i,s){var o=s<t.length-1;return c(i,o,s>0,(function(t){e||(e=t),t&&n.forEach(u),o||(n.forEach(u),r(e))}))}));return t.reduce(l)}},7073:(e,t,r)=>{"use strict";var n=r(2884),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var s=Object.create(r(7646));s.inherits=r(8874);var o=r(8051),a=r(2557);s.inherits(l,o);for(var d=i(a.prototype),c=0;c<d.length;c++){var u=d[c];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},5163:(e,t,r)=>{"use strict";e.exports=s;var n=r(7640),i=Object.create(r(7646));function s(e){if(!(this instanceof s))return new s(e);n.call(this,e)}i.inherits=r(8874),i.inherits(s,n),s.prototype._transform=function(e,t,r){r(null,e)}},8051:(e,t,r)=>{"use strict";var n=r(2884);e.exports=w;var i,s=r(7906);w.ReadableState=b,r(2361).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=r(6748),d=r(2521).Buffer,c=global.Uint8Array||function(){},u=Object.create(r(7646));u.inherits=r(8874);var l=r(3837),h=void 0;h=l&&l.debuglog?l.debuglog("stream"):function(){};var f,p=r(9128),g=r(2262);u.inherits(w,a);var m=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var n=t instanceof(i=i||r(7073));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var s=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(1922).s),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function w(e){if(i=i||r(7073),!(this instanceof w))return new w(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function y(e,t,r,n,i){var s,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,E(e)}}(e,o)):(i||(s=function(e,t){var r,n;return n=t,d.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=function(e){return d.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):v(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?v(e,o,t,!1):R(e,o)):v(e,o,t,!1))):n||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function v(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&E(e)),R(e,t)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=g.destroy,w.prototype._undestroy=g.undestroy,w.prototype._destroy=function(e,t){this.push(null),t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=d.from(e,t),t=""),r=!0),y(this,e,t,!1,r)},w.prototype.unshift=function(e){return y(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){return f||(f=r(1922).s),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var _=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=_?e=_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(M,e):M(e))}function M(e){h("emit readable"),e.emit("readable"),j(e)}function R(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(O,e,t))}function O(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function P(e){h("readable nexttick read 0"),e.read(0)}function k(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0==(e-=o)){o===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=d.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,o),0==(e-=o)){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(N,t,e))}function N(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function T(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):E(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&C(this),null;var n,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(r,t))),null===(n=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&C(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var a=t&&!1===t.end||e===process.stdout||e===process.stderr?b:d;function d(){h("onend"),e.end()}i.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",(function t(n,s){h("onunpipe"),n===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,h("cleanup"),e.removeListener("close",g),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",t),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",f),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,j(e))}}(r);e.on("drain",c);var u=!1,l=!1;function f(t){h("ondata"),l=!1,!1!==e.write(t)||l||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==T(i.pipes,e))&&!u&&(h("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function p(t){h("onerror",t),b(),e.removeListener("error",p),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",m),b()}function m(){h("onfinish"),e.removeListener("close",g),b()}function b(){h("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?s(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",p),e.once("close",g),e.once("finish",m),e.emit("pipe",r),i.flowing||(h("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,r);return this}var o=T(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},w.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&E(this):n.nextTick(P,this))}return r},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(k,e,t))}(this,e)),this},w.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){h("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<m.length;s++)e.on(m[s],this.emit.bind(this,m[s]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=x},7640:(e,t,r)=>{"use strict";e.exports=o;var n=r(7073),i=Object.create(r(7646));function s(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){d(e,t,r)})):d(this,null,null)}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(8874),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},2557:(e,t,r)=>{"use strict";var n=r(2884);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var s,o=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n.nextTick;m.WritableState=g;var a=Object.create(r(7646));a.inherits=r(8874);var d,c={deprecate:r(3854)},u=r(6748),l=r(2521).Buffer,h=global.Uint8Array||function(){},f=r(2262);function p(){}function g(e,t){s=s||r(7073),e=e||{};var a=t instanceof s;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var d=e.highWaterMark,c=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:a&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(s(i),e._writableState.errorEmitted=!0,e.emit("error",i),S(e,t))}(e,r,i,t,s);else{var a=v(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||y(e,r),i?o(w,e,r,a,s):w(e,r,a,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function m(e){if(s=s||r(7073),!(d.call(m,this)||this instanceof s))return new m(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function b(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function y(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,s=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,d=!0;r;)s[a]=r,r.isBuf||(d=!1),r=r.next,a+=1;s.allBuffers=d,b(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r=v(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}a.inherits(m,u),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===m&&e&&e._writableState instanceof g}})):d=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,r){var i,s=this._writableState,o=!1,a=!s.objectMode&&(i=e,l.isBuffer(i)||i instanceof h);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=p),s.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,i){var s=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),n.nextTick(i,o),s=!1),s}(this,s,e,r))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,a,n,i,s);return d}(this,s,a,e,t,r)),o},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=f.destroy,m.prototype._undestroy=f.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}},9128:(e,t,r)=>{"use strict";var n=r(2521).Buffer,i=r(3837);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i=n.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=i,r=o,s.data.copy(t,r),o+=s.data.length,s=s.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},2262:(e,t,r)=>{"use strict";var n=r(2884);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},6748:(e,t,r)=>{e.exports=r(2781)},2521:(e,t,r)=>{var n=r(4300),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},1922:(e,t,r)=>{"use strict";var n=r(2521).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=d,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=l,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},1258:(e,t,r)=>{var n=r(2781);"disable"===process.env.READABLE_STREAM&&n?(e.exports=n,(t=e.exports=n.Readable).Readable=n.Readable,t.Writable=n.Writable,t.Duplex=n.Duplex,t.Transform=n.Transform,t.PassThrough=n.PassThrough,t.Stream=n):((t=e.exports=r(8051)).Stream=n||t,t.Readable=t,t.Writable=r(2557),t.Duplex=r(7073),t.Transform=r(7640),t.PassThrough=r(5163))},3854:(e,t,r)=>{e.exports=r(3837).deprecate},8892:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},7082:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectMultiplex=void 0;const i=r(1258),s=n(r(8797)),o=n(r(9928)),a=r(1274),d=Symbol("IGNORE_SUBSTREAM");class c extends i.Duplex{constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already ended`);if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new a.Substream({parent:this,name:e});return this._substreams[e]=t,function(e,r){const n=o.default((e=>t.destroy(e||void 0)));s.default(e,{readable:!1},n),s.default(e,{writable:!1},n)}(this),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=d}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const s=this._substreams[n];return s?(s!==d&&s.push(i),r()):(console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}}t.ObjectMultiplex=c},1274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Substream=void 0;const n=r(1258);class i extends n.Duplex{constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}t.Substream=i},8392:(e,t,r)=>{"use strict";const n=r(7082);e.exports=n.ObjectMultiplex},2294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const n=r(7847);class i extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return n.default(this.serialize(),s,2)}}function s(e,t){if("[Circular]"!==t)return t}t.EthereumRpcError=i,t.EthereumProviderError=class extends i{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}},2662:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},6373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const n=r(2294),i=r(8753),s=r(2662);function o(e,t){const[r,s]=d(t);return new n.EthereumRpcError(e,r||i.getMessageFromCode(e),s)}function a(e,t){const[r,s]=d(t);return new n.EthereumProviderError(e,r||i.getMessageFromCode(e),s)}function d(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}t.ethErrors={rpc:{parse:e=>o(s.errorCodes.rpc.parse,e),invalidRequest:e=>o(s.errorCodes.rpc.invalidRequest,e),invalidParams:e=>o(s.errorCodes.rpc.invalidParams,e),methodNotFound:e=>o(s.errorCodes.rpc.methodNotFound,e),internal:e=>o(s.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return o(t,e)},invalidInput:e=>o(s.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>o(s.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>o(s.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>o(s.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>o(s.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>o(s.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>a(s.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(s.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(s.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(s.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(s.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,i)}}}},9826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const n=r(2294);Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return n.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});const i=r(8753);Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return i.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return i.getMessageFromCode}});const s=r(6373);Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return s.ethErrors}});const o=r(2662);Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})},8753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=r(2662),i=r(2294),s=n.errorCodes.rpc.internal,o={code:s,message:a(s)};function a(e,r="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(e)){const r=e.toString();if(l(n.errorValues,r))return n.errorValues[r].message;if(c(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function d(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!n.errorValues[t]||!!c(e)}function c(e){return e>=-32099&&e<=-32e3}function u(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=a,t.isValidCode=d,t.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!1}={}){var n,s;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof i.EthereumRpcError)return e.serialize();const c={};if(e&&"object"==typeof e&&!Array.isArray(e)&&l(e,"code")&&d(e.code)){const t=e;c.code=t.code,t.message&&"string"==typeof t.message?(c.message=t.message,l(t,"data")&&(c.data=t.data)):(c.message=a(c.code),c.data={originalError:u(e)})}else{c.code=t.code;const r=null===(n=e)||void 0===n?void 0:n.message;c.message=r&&"string"==typeof r?r:t.message,c.data={originalError:u(e)}}const h=null===(s=e)||void 0===s?void 0:s.stack;return r&&e&&h&&"string"==typeof h&&(c.stack=h),c}},2189:(e,t)=>{"use strict";function r(e,t){return"string"==typeof e}function n(e,t){return"2.0"===e}function i(e,t){return"number"==typeof e}function s(e,t){return Array.isArray(e)&&e.every((e=>!0))}function o(e,t){return(null!==e&&"object"==typeof e||"function"==typeof e)&&Object.entries(e).every((([e,t])=>r(e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.isSnapRpc=t.isExecuteSnap=t.isTerminate=t.isPing=t.isAnyOfSnapNameSourceCodeEndowmentsTargetOriginJsonRpcRequestOKOKOKSnapRpcResult=t.isSnapRpcResult=t.isOK=t.isJsonRpcRequest=t.isOrigin=t.isTarget=t.isEndowments=t.isSourceCode=t.isSnapName=t.isJSONRPCParams=t.isJSONRPCParamsAsObject=t.isJSONRPCParamsAsArray=t.isJSONRPCMethod=t.isJSONRPCID=t.isNumberHo1ClIqD=t.isStringDoaGddGA=t.isJSONRPCString=t.isEndowment=void 0,t.isEndowment=r,t.isJSONRPCString=n,t.isStringDoaGddGA=function(e,t){return"string"==typeof e},t.isNumberHo1ClIqD=i,t.isJSONRPCID=function(e,t){return r(e)||i(e)},t.isJSONRPCMethod=function(e,t){return"string"==typeof e},t.isJSONRPCParamsAsArray=s,t.isJSONRPCParamsAsObject=o,t.isJSONRPCParams=function(e,t){return s(e)||o(e)},t.isSnapName=function(e,t){return"string"==typeof e},t.isSourceCode=function(e,t){return"string"==typeof e},t.isEndowments=function(e,t){return Array.isArray(e)&&e.every((e=>r(e)))},t.isTarget=function(e,t){return"string"==typeof e},t.isOrigin=function(e,t){return"string"==typeof e},t.isJsonRpcRequest=function(e,t){return(null!==e&&"object"==typeof e||"function"==typeof e)&&n(e.jsonrpc)&&(void 0===e.id||r(e.id)||i(e.id))&&r(e.method)&&(void 0===e.params||s(e.params)||o(e.params))&&Object.entries(e).filter((([e])=>!["jsonrpc","id","method","params"].includes(e))).every((([e,t])=>r(e)))},t.isOK=function(e,t){return"OK"===e},t.isSnapRpcResult=function(e,t){return!0},t.isAnyOfSnapNameSourceCodeEndowmentsTargetOriginJsonRpcRequestOKOKOKSnapRpcResult=function(e,t){return!0},t.isPing=function(e,t){return"function"==typeof e},t.isTerminate=function(e,t){return"function"==typeof e},t.isExecuteSnap=function(e,t){return"function"==typeof e},t.isSnapRpc=function(e,t){return"function"==typeof e}},1078:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSnapExecutor=void 0;const i=r(2972),s=r(9826),o=n(r(201)),a=r(2189),d=r(8266),c=r(8039),u=r(4017),l=r(6410),h=r(2571),f={code:s.errorCodes.rpc.internal,message:"Execution Environment Error"};t.BaseSnapExecutor=class{constructor(e,t){this.snapData=new Map,this.commandStream=e,this.commandStream.on("data",this.onCommandRequest.bind(this)),this.rpcStream=t,this.methods=(0,c.getCommandMethodImplementations)(this.startSnap.bind(this),((e,t,r)=>{var n;const i=this.snapData.get(e);if(void 0===(null===(n=null==i?void 0:i.exports)||void 0===n?void 0:n.onRpcRequest))throw new Error(`No onRpcRequest handler exported for snap "${e}`);const s=i.exports.onRpcRequest;return this.executeInSnapContext(e,(()=>s({origin:t,request:r})))}),this.onTerminate.bind(this))}errorHandler(e,t){const r=(0,h.constructError)(e),n=(0,s.serializeError)(r,{fallbackError:f,shouldIncludeStack:!1});this.notify({error:Object.assign(Object.assign({},n),{data:Object.assign(Object.assign({},t),{stack:null==r?void 0:r.stack})})})}async onCommandRequest(e){if(!(0,a.isJsonRpcRequest)(e))throw new Error("Command stream received a non Json Rpc Request");const{id:t,method:r,params:n}=e;if(void 0===t)throw new Error("Notifications not supported");if("rpc.discover"===r)return void this.respond(t,{result:o.default});const i=o.default.methods.find((e=>e.name===r));if(!i||!this.methods[r])return void this.respond(t,{error:s.ethErrors.rpc.methodNotFound({data:{method:r}}).serialize()});const d=(0,l.sortParamKeys)(i,n);try{const e=await this.methods[r](...d);this.respond(t,{result:e})}catch(e){this.respond(t,{error:(0,s.serializeError)(e,{fallbackError:f})})}}notify(e){this.commandStream.write(Object.assign(Object.assign({},e),{jsonrpc:"2.0"}))}respond(e,t){this.commandStream.write(Object.assign(Object.assign({},t),{id:e,jsonrpc:"2.0"}))}async startSnap(e,t,r){console.log(`starting snap '${e}' in worker`),this.snapPromiseErrorHandler&&(0,u.removeEventListener)("unhandledrejection",this.snapPromiseErrorHandler),this.snapErrorHandler&&(0,u.removeEventListener)("error",this.snapErrorHandler),this.snapErrorHandler=t=>{this.errorHandler(t.error,{snapName:e})},this.snapPromiseErrorHandler=t=>{this.errorHandler(t instanceof Error?t:t.reason,{snapName:e})};const n=this.createSnapProvider(),i={exports:{}};try{const{endowments:s,teardown:o}=(0,d.createEndowments)(n,r);this.snapData.set(e,{idleTeardown:o,runningEvaluations:new Set,exports:{}}),(0,u.addEventListener)("unhandledRejection",this.snapPromiseErrorHandler),(0,u.addEventListener)("error",this.snapErrorHandler);const a=new Compartment(Object.assign(Object.assign({},s),{module:i,exports:i.exports,window:Object.assign({},s),self:Object.assign({},s)}));await this.executeInSnapContext(e,(()=>{a.evaluate(t),this.registerSnapExports(e,i)}))}catch(t){throw this.removeSnap(e),new Error(`Error while running snap '${e}': ${t.message}`)}}onTerminate(){this.snapData.forEach((e=>e.runningEvaluations.forEach((e=>e.stop())))),this.snapData.clear()}registerSnapExports(e,t){var r;if("function"==typeof(null===(r=null==t?void 0:t.exports)||void 0===r?void 0:r.onRpcRequest)){const r=this.snapData.get(e);void 0!==r&&(console.log("Worker: Registering RPC message handler",t.exports.onRpcRequest),r.exports=Object.assign(Object.assign({},r.exports),{onRpcRequest:t.exports.onRpcRequest}))}}createSnapProvider(){const e=new i.MetaMaskInpageProvider(this.rpcStream,{shouldSendMetadata:!1}),t=e.request;return e.request=async e=>{this.notify({result:{type:"OutboundRequest"}});try{return await t(e)}finally{this.notify({result:{type:"OutboundResponse"}})}},e}removeSnap(e){this.snapData.delete(e)}async executeInSnapContext(e,t){const r=this.snapData.get(e);if(void 0===r)throw new Error(`Tried to execute in context of unknown snap: "${e}".`);let n;const i=new Promise(((t,r)=>n=()=>r(s.ethErrors.rpc.internal(`The snap "${e}" has been terminated during execution.`)))),o={stop:n};try{return r.runningEvaluations.add(o),await Promise.race([t(),i])}finally{r.runningEvaluations.delete(o),0===r.runningEvaluations.size&&await r.idleTeardown()}}}},8039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommandMethodImplementations=void 0;const n=r(2189);t.getCommandMethodImplementations=function(e,t,r){return{ping:async()=>"OK",terminate:async()=>(r(),"OK"),executeSnap:async(t,r,i)=>{if("string"!=typeof t)throw new Error("snapName is not a string");if("string"!=typeof r)throw new Error("sourceCode is not a string");if(void 0!==i&&!(0,n.isEndowments)(i))throw new Error("endowment is not a proper Endowments object");return await e(t,r,i),"OK"},snapRpc:async(e,r,i)=>{if("string"!=typeof e)throw new Error("target is not a string");if("string"!=typeof r)throw new Error("origin is not a string");if(!(0,n.isJsonRpcRequest)(i))throw new Error("request is not a proper JSON RPC Request");return t(e,r,i)}}}},4616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={names:["Buffer"],factory:()=>({Buffer})};t.default=r},2816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2795),i={names:["crypto","SubtleCrypto"],factory:()=>{if("crypto"in n.rootRealmGlobal&&"object"==typeof n.rootRealmGlobal.crypto&&"SubtleCrypto"in n.rootRealmGlobal&&"function"==typeof n.rootRealmGlobal.SubtleCrypto)return{crypto:n.rootRealmGlobal.crypto,SubtleCrypto:n.rootRealmGlobal.SubtleCrypto};const e=r(6113).webcrypto;return{crypto:e,SubtleCrypto:e.subtle.constructor}}};t.default=i},8266:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isConstructor=t.createEndowments=void 0;const s=r(5554),o=r(2795),a=i(r(4616)),d=i(r(8033)),c=i(r(6901)),u=i(r(6390)),l=i(r(2816)),h=[a.default,u.default,d.default,c.default,l.default].reduce(((e,t)=>(t.names.forEach((r=>{e.set(r,t.factory)})),e)),new Map);function f(e){var t,r;return Boolean("string"==typeof(null===(r=null===(t=e.prototype)||void 0===t?void 0:t.constructor)||void 0===r?void 0:r.name))}t.createEndowments=function(e,t=[]){const r={},i=t.reduce((({allEndowments:e,teardowns:t},i)=>{if(h.has(i)){if(!(0,s.hasProperty)(r,i)){const e=h.get(i)(),{teardownFunction:s}=e,o=n(e,["teardownFunction"]);Object.assign(r,o),s&&t.push(s)}e[i]=r[i]}else{if(!(i in o.rootRealmGlobal))throw new Error(`Unknown endowment: "${i}".`);{const t=o.rootRealmGlobal[i];e[i]="function"!=typeof t||f(t)?t:t.bind(o.rootRealmGlobal)}}return{allEndowments:e,teardowns:t}}),{allEndowments:{wallet:e},teardowns:[]});return{endowments:i.allEndowments,teardown:async()=>{await Promise.all(i.teardowns.map((e=>e())))}}},t.isConstructor=f},8033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={names:["setInterval","clearInterval"],factory:()=>{const e=new Map,t=t=>{const r=e.get(t);void 0!==r&&(clearInterval(r),e.delete(t))};return{setInterval:(t,r)=>{if("function"!=typeof t)throw new Error("The interval handler must be a function. Received: "+typeof t);const n=Object.freeze({}),i=setInterval(t,r);return e.set(n,i),n},clearInterval:t,teardownFunction:()=>{for(const r of e.keys())t(r)}}}};t.default=r},6901:function(e,t,r){"use strict";var n=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(2571),o={names:["fetch","WebSocket"],factory:()=>{var e,t,r,o,a,d,c,u,l,h,f;const p=new Set,g=new FinalizationRegistry((e=>e()));return{fetch:async(e,t)=>{const r=new AbortController;if(null!==(null==t?void 0:t.signal)&&void 0!==(null==t?void 0:t.signal)){const e=t.signal;e.addEventListener("abort",(()=>{r.abort(e.reason)}),{once:!0})}let n,i;try{const s=fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));i={cancel:async()=>{r.abort();try{await s}catch(e){}}},p.add(i),n=await s}finally{void 0!==i&&p.delete(i)}if(null!==n.body){const e=new WeakRef(n.body),t={cancel:async()=>{var t;try{await(null===(t=e.deref())||void 0===t?void 0:t.cancel())}catch(e){}}};p.add(t),g.register(n.body,(()=>p.delete(t)))}return n},WebSocket:(f=class{constructor(r,s){e.add(this),o.set(this,void 0),a.set(this,!1),d.set(this,{}),c.set(this,null),u.set(this,null),l.set(this,null),h.set(this,null),n(this,o,new WebSocket(r,s),"f");const f=new WeakRef(i(this,e,"m",t).bind(this)),m={cancel:async()=>{var e;try{await(null===(e=f.deref())||void 0===e?void 0:e())}catch(e){}}};p.add(m),g.register(this,(()=>p.delete(m)))}get onclose(){return i(this,h,"f")}set onclose(t){!0!==i(this,a,"f")&&(n(this,h,t,"f"),i(this,o,"f").onclose=i(this,e,"m",r).call(this,t))}get onerror(){return i(this,l,"f")}set onerror(t){n(this,l,t,"f"),i(this,o,"f").onerror=i(this,e,"m",r).call(this,t)}get onmessage(){return i(this,u,"f")}set onmessage(t){n(this,u,t,"f"),i(this,o,"f").onmessage=i(this,e,"m",r).call(this,t)}get onopen(){return i(this,c,"f")}set onopen(t){n(this,c,t,"f"),i(this,o,"f").onopen=i(this,e,"m",r).call(this,t)}close(e,t){i(this,o,"f").close(e,t)}send(e){i(this,o,"f").send(e)}get CLOSED(){return i(this,o,"f").CLOSED}get CLOSING(){return i(this,o,"f").CLOSING}get CONNECTING(){return i(this,o,"f").CONNECTING}get OPEN(){return i(this,o,"f").OPEN}get binaryType(){return i(this,o,"f").binaryType}set binaryType(e){i(this,o,"f").binaryType=e}get bufferedAmount(){var e;return null!==(e=i(this,o,"f").bufferedAmount)&&void 0!==e?e:0}get extensions(){var e;return null!==(e=i(this,o,"f").extensions)&&void 0!==e?e:""}get protocol(){return i(this,o,"f").protocol}get readyState(){return i(this,o,"f").readyState}get url(){return i(this,o,"f").url}addEventListener(t,n,s){if(!0!==i(this,a,"f")){void 0===i(this,d,"f")[t]&&(i(this,d,"f")[t]=new Map);const a=i(this,e,"m",r).call(this,n);null!==a&&(i(this,d,"f")[t].set(n,a),i(this,o,"f").addEventListener(t,a,s))}}removeEventListener(e,t,r){if(void 0!==i(this,d,"f")[e]){const n=i(this,d,"f")[e].get(t);void 0!==n&&(i(this,d,"f")[e].delete(t),i(this,o,"f").removeEventListener(e,n,r))}}dispatchEvent(e){return("close"!==e.type||!0!==i(this,a,"f"))&&i(this,o,"f").dispatchEvent(e)}},o=new WeakMap,a=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,e=new WeakSet,t=function(){var e,t,r;i(this,o,"f").onclose=null;for(const r of null!==(t=null===(e=i(this,d,"f").close)||void 0===e?void 0:e.values())&&void 0!==t?t:[])i(this,o,"f").removeEventListener("close",r);let s;null===(r=i(this,d,"f").close)||void 0===r||r.clear();const c=new Promise((e=>s=e));return i(this,o,"f").onclose=()=>{s()},n(this,a,!0,"f"),i(this,o,"f").close(),c},r=function(e){return null===e?null:t=>{const r=(0,s.allFunctions)(t).map((e=>t[e].bind(this)));e.apply(this,[Object.assign(Object.assign(Object.assign({},t),r),{target:this,currentTarget:this,srcElement:this,ports:[this],source:null,composedPath:()=>[this]})])}},f),teardownFunction:async()=>{const e=[];p.forEach((({cancel:t})=>e.push(t()))),p.clear(),await Promise.all(e)}}}};t.default=o},6390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={names:["setTimeout","clearTimeout"],factory:()=>{const e=new Map,t=t=>{const r=e.get(t);void 0!==r&&(clearTimeout(r),e.delete(t))};return{setTimeout:(t,r)=>{if("function"!=typeof t)throw new Error("The timeout handler must be a function. Received: "+typeof t);const n=Object.freeze({}),i=setTimeout((()=>{e.delete(n),t()}),r);return e.set(n,i),n},clearTimeout:t,teardownFunction:()=>{for(const r of e.keys())t(r)}}}};t.default=r},712:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SNAP_STREAM_NAMES=void 0,(r=t.SNAP_STREAM_NAMES||(t.SNAP_STREAM_NAMES={})).JSON_RPC="jsonRpc",r.COMMAND="command"},4017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeEventListener=t.addEventListener=void 0;const n=r(2795);t.addEventListener=function(e,t){if("addEventListener"in n.rootRealmGlobal&&"function"==typeof n.rootRealmGlobal.addEventListener)return n.rootRealmGlobal.addEventListener(e.toLowerCase(),t);if(n.rootRealmGlobal.process&&"on"in n.rootRealmGlobal.process&&"function"==typeof n.rootRealmGlobal.process.on)return n.rootRealmGlobal.process.on(e,t);throw new Error("Platform agnostic addEventListener failed")},t.removeEventListener=function(e,t){if("removeEventListener"in n.rootRealmGlobal&&"function"==typeof n.rootRealmGlobal.removeEventListener)return n.rootRealmGlobal.removeEventListener(e.toLowerCase(),t);if(n.rootRealmGlobal.process&&"removeListener"in n.rootRealmGlobal.process&&"function"==typeof n.rootRealmGlobal.process.removeListener)return n.rootRealmGlobal.process.removeListener(e,t);throw new Error("Platform agnostic removeEventListener failed")}},2795:(e,t)=>{"use strict";var r;let n,i;if(Object.defineProperty(t,"__esModule",{value:!0}),t.rootRealmGlobalName=t.rootRealmGlobal=void 0,function(e){e.globalThis="globalThis",e.global="global",e.self="self",e.window="window"}(r||(r={})),"undefined"!=typeof globalThis)n=globalThis,i=r.globalThis;else if("undefined"!=typeof self)n=self,i=r.self;else if("undefined"!=typeof window)n=window,i=r.window;else{if("undefined"==typeof global)throw new Error("Unknown realm type; failed to identify global object.");n=global,i=r.global}const s=n;t.rootRealmGlobal=s;const o=i;t.rootRealmGlobalName=o},8342:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeLockdownMore=void 0,t.executeLockdownMore=function(){try{const e=Reflect.ownKeys((new Compartment).globalThis),t=new Set(["eval","Function"]);new Set([...e]).forEach((e=>{const r=Reflect.getOwnPropertyDescriptor(globalThis,e);r&&(r.configurable&&(function(e){return"set"in e||"get"in e}(r)?Object.defineProperty(globalThis,e,{configurable:!1}):Object.defineProperty(globalThis,e,{configurable:!1,writable:!1})),t.has(e)&&harden(globalThis[e]))}))}catch(e){throw console.error("Protecting intrinsics failed:",e),e}}},6849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeLockdown=void 0,t.executeLockdown=function(){try{lockdown({consoleTaming:"unsafe",errorTaming:"unsafe",mathTaming:"unsafe",dateTaming:"unsafe",overrideTaming:"severe"})}catch(e){throw console.error("Lockdown failed:",e),e}}},6410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortParamKeys=void 0,t.sortParamKeys=(e,t)=>{if(!t)return[];if(t instanceof Array)return t;const r=e.params.map((e=>e.name)).reduce(((e,t,r)=>Object.assign(Object.assign({},e),{[t]:r})),{});return Object.entries(t).sort((([e,t],[n,i])=>r[e]-r[n])).map((([e,t])=>t))}},2571:(e,t)=>{"use strict";function r(e){const t=new Set;let r=e;do{for(const e of Reflect.ownKeys(r))t.add([r,e])}while((r=Reflect.getPrototypeOf(r))&&r!==Object.prototype);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.allFunctions=t.allProperties=t.constructError=void 0,t.constructError=function(e){let t;return e instanceof Error?t=e:"string"==typeof e&&(t=new Error(e),delete t.stack),t},t.allProperties=r,t.allFunctions=function(e){const t=[];for(const[n,i]of r(e)){if("constructor"===i)continue;const e=Reflect.getOwnPropertyDescriptor(n,i);void 0!==e&&"function"==typeof e.value&&t.push(i)}return t}},5207:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThreadSnapExecutor=void 0;const i=n(r(8392)),s=n(r(3171)),o=r(9679),a=r(1078),d=r(712);class c extends a.BaseSnapExecutor{static initialize(){console.log("Worker: Connecting to parent.");const e=new o.ThreadMessageStream,t=new i.default;(0,s.default)(e,t,e,(e=>{e&&console.error("Parent stream failure, closing worker.",e),self.close()}));const r=t.createStream(d.SNAP_STREAM_NAMES.COMMAND),n=t.createStream(d.SNAP_STREAM_NAMES.JSON_RPC);return new c(r,n)}}t.ThreadSnapExecutor=c},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},2781:e=>{"use strict";e.exports=require("stream")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},5543:e=>{"use strict";e.exports=JSON.parse('{"CHROME_ID":"nkbihfbeogaeaoehlefnkodbefgpgknn","FIREFOX_ID":"webextension@metamask.io"}')},201:e=>{"use strict";e.exports=JSON.parse('{"openrpc":"1.2.4","info":{"title":"MetaMask Snaps Execution Environment API","version":"0.0.0-development"},"methods":[{"name":"ping","description":"confirms that a connection has been established with the execution environment","params":[],"result":{"name":"PingResult","schema":{"$ref":"#/components/schemas/OK"}}},{"name":"terminate","description":"tells the execution environment that it is being shut down","params":[],"result":{"name":"TerminateResult","schema":{"$ref":"#/components/schemas/OK"}}},{"name":"executeSnap","description":"executes a snap in the environment. The snap can then be interacted with via `snapRpc`","params":[{"name":"snapName","required":true,"description":"the name of the snap","schema":{"title":"SnapName","type":"string"}},{"name":"sourceCode","description":"a snaps source code that gets executed in the environment","required":true,"schema":{"title":"SourceCode","type":"string"}},{"name":"endowments","description":"A list of endowments to provide to SES","required":false,"schema":{"title":"Endowments","description":"An array of the names of the endowments","type":"array","items":{"title":"Endowment","type":"string"}}}],"result":{"name":"executeSnapResult","schema":{"$ref":"#/components/schemas/OK"}},"examples":[{"name":"BasicTestSnapExecuteExample","params":[{"name":"snapName","value":"TestSnap"},{"name":"sourceCode","value":"module.exports.onRpcRequest = async ({ request }) => { return request.method + request.id }"}],"result":{"name":"BasicTestSnapExampleResult","value":"OK"}}]},{"name":"snapRpc","params":[{"name":"target","required":true,"description":"the name of the snap method","schema":{"title":"Target","type":"string"}},{"name":"origin","required":true,"description":"Origin of the snap JSON-RPC request","schema":{"title":"Origin","type":"string"}},{"name":"request","required":true,"description":"JSON-RPC request","schema":{"$ref":"#/components/schemas/JsonRpcRequest"}}],"result":{"name":"HandleSnapRpcResult","schema":{"title":"SnapRpcResult"}},"examples":[{"name":"TestSnapExample","params":[{"name":"target","value":"TestSnap"},{"name":"origin","value":"foo.com"},{"name":"request","value":{"jsonrpc":"2.0","method":"hello","params":[],"id":1}}],"result":{"name":"TestSnapResultExample","value":"hello1"}}]}],"components":{"schemas":{"OK":{"title":"OK","type":"string","const":"OK"},"JsonRpcRequest":{"title":"JsonRpcRequest","type":"object","required":["jsonrpc","method"],"properties":{"jsonrpc":{"title":"JSONRPCString","type":"string","const":"2.0"},"id":{"title":"JSONRPCID","oneOf":[{"type":"string"},{"type":"number"}]},"method":{"title":"JSONRPCMethod","description":"the name of the method","type":"string"},"params":{"title":"JSONRPCParams","type":["array","object"]}}}}}}')}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=r(6849),t=r(8342),n=r(5207);(0,e.executeLockdown)(),(0,t.executeLockdownMore)(),n.ThreadSnapExecutor.initialize()})()})();